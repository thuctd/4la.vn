(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{Qq7v:function(t,e,i){"use strict";i.r(e),i.d(e,"VehicleModule",(function(){return vt}));var c=i("SVse"),n=i("COeT"),s=i("8Y7J"),o=i("IheW");let r=(()=>{class t{constructor(t,e){this.http=t,this.plus=e,this.httpOptions=this.plus.getHeader(),this.apiUrl=this.plus.getApiUrl("settlement/"),this.collection="settlement"}get(){return this.http.get(this.apiUrl,this.httpOptions)}getByMonth(t){return this.http.get(this.apiUrl+"getByMonth/"+t,this.httpOptions)}getByIdMonth(t,e){return console.log(t,e),this.http.get(this.apiUrl+"id/"+t+"/month/"+e,this.httpOptions)}create(t){return this.http.post(this.apiUrl,t,this.httpOptions)}update(t){return this.http.put(this.apiUrl,t,this.httpOptions)}delete(t){return this.http.delete(this.apiUrl+t,this.httpOptions)}find(t){return this.http.post(this.apiUrl+"/find",t,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(s.cc(o.a),s.cc(n.a))},t.\u0275prov=s.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),b=(()=>{class t{constructor(t,e){this.http=t,this.plus=e,this.httpOptions=this.plus.getHeader(),this.apiUrl=this.plus.getApiUrl("vehicle/"),this.collection="vehicle"}get(){return this.http.get(this.apiUrl,this.httpOptions)}getByStatus(){return this.http.get(this.apiUrl,this.httpOptions)}getForOrder(){return this.http.get(this.apiUrl+"order",this.httpOptions)}create(t){return this.http.post(this.apiUrl,t,this.httpOptions)}update(t){return this.http.put(this.apiUrl,t,this.httpOptions)}delete(t){return this.http.delete(this.apiUrl+t,this.httpOptions)}find(t){return this.http.post(this.apiUrl+"/find",t,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(s.cc(o.a),s.cc(n.a))},t.\u0275prov=s.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var a=i("s7LF"),l=i("Kj3r"),h=i("EUZL");function d(t,e){1&t&&(s.Yb(0,"div",8),s.Tb(1,"i",9),s.Xb())}function u(t,e){if(1&t){const t=s.Zb();s.Yb(0,"tbody"),s.Yb(1,"tr"),s.Yb(2,"td",16),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(2).log(i)})),s.Jc(3),s.Xb(),s.Yb(4,"td"),s.Jc(5),s.Xb(),s.Yb(6,"td"),s.Jc(7),s.kc(8,"number"),s.Xb(),s.Yb(9,"td"),s.Jc(10),s.kc(11,"number"),s.Xb(),s.Yb(12,"td"),s.Yb(13,"button",17),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(2).delSettlement(i._id)})),s.Tb(14,"i",18),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit;s.Hb(3),s.Kc(t.vehicleId.label),s.Hb(2),s.Kc(t.vehicleId.fuel),s.Hb(2),s.Kc(s.lc(8,4,t.used)),s.Hb(3),s.Kc(s.lc(11,6,t.fuelAdvance))}}function p(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div",10),s.Yb(1,"h4",11),s.Jc(2,"B\u1ea2NG QUY\u1ebeT TO\xc1N NHI\xcaN LI\u1ec6U "),s.Yb(3,"i",12),s.fc("click",(function(){return s.zc(t),s.jc().download()})),s.Xb(),s.Xb(),s.Yb(4,"table",13),s.Yb(5,"thead",14),s.Yb(6,"tr"),s.Yb(7,"th"),s.Jc(8,"Bi\u1ec3n s\u1ed1 xe"),s.Xb(),s.Yb(9,"th"),s.Jc(10,"Nhi\xean li\u1ec7u s\u1eed d\u1ee5ng"),s.Xb(),s.Yb(11,"th"),s.Jc(12,"S\u1ed1 Km ch\u1ed1t"),s.Xb(),s.Yb(13,"th"),s.Jc(14,"Nhi\xean li\u1ec7u t\u1ea1m \u1ee9ng"),s.Xb(),s.Tb(15,"th"),s.Xb(),s.Xb(),s.Hc(16,u,15,8,"tbody",15),s.Xb(),s.Xb()}if(2&t){const t=s.jc();s.Hb(16),s.pc("ngForOf",t.vehiclesCheck)}}function m(t,e){if(1&t){const t=s.Zb();s.Yb(0,"tr"),s.Yb(1,"td",16),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(2).log(i)})),s.Jc(2),s.Xb(),s.Yb(3,"td"),s.Jc(4),s.Xb(),s.Yb(5,"td"),s.Jc(6),s.Xb(),s.Yb(7,"td"),s.Yb(8,"button",22),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(2).selectItem(i)})),s.Jc(9,"Ch\u1ed1t km"),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit;s.Hb(2),s.Kc(t.label),s.Hb(2),s.Kc(t.brand),s.Hb(2),s.Kc(t.manager.fullName||t.manager.displayName)}}function f(t,e){if(1&t&&(s.Yb(0,"div",10),s.Yb(1,"H4",19),s.Jc(2,"DANH S\xc1CH CH\u01afA CH\u1ed0T KM"),s.Xb(),s.Yb(3,"table",20),s.Yb(4,"thead",21),s.Yb(5,"tr"),s.Yb(6,"th"),s.Jc(7,"Bi\u1ec3n s\u1ed1"),s.Xb(),s.Yb(8,"th"),s.Jc(9,"Hi\u1ec7u xe"),s.Xb(),s.Yb(10,"th"),s.Jc(11,"Ng\u01b0\u1eddi qu\u1ea3n l\xfd"),s.Xb(),s.Tb(12,"th"),s.Xb(),s.Xb(),s.Yb(13,"tbody"),s.Hc(14,m,10,3,"tr",15),s.Xb(),s.Xb(),s.Xb()),2&t){const t=s.jc();s.Hb(14),s.pc("ngForOf",t.vehiclesFilter)}}function g(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div"),s.Yb(1,"h6"),s.Jc(2,"S\u1ed1 gi\u1edd c\u1ea9u "),s.Xb(),s.Yb(3,"input",40),s.fc("input",(function(){return s.zc(t),s.jc(2).used()})),s.Xb(),s.Xb()}}function Y(t,e){if(1&t&&(s.Yb(0,"div",41),s.Yb(1,"h6"),s.Jc(2,"S\u1ed1 km th\xe1ng tr\u01b0\u1edbc: "),s.Yb(3,"span",42),s.Jc(4),s.kc(5,"number"),s.Xb(),s.Xb(),s.Tb(6,"hr"),s.Yb(7,"h6"),s.Jc(8),s.Xb(),s.Tb(9,"hr"),s.Yb(10,"h6"),s.Jc(11),s.kc(12,"number"),s.Xb(),s.Xb()),2&t){const t=s.jc(2);s.Hb(4),s.Lc("",s.lc(5,3,t.itemSelected.preUsed)," "),s.Hb(4),s.Lc("S\u1ed1 km th\u1ef1c hi\u1ec7n trong th\xe1ng: ",t.newUsed-t.itemSelected.preUsed||"Ch\u01b0a c\xf3 s\u1ed1 li\u1ec7u",""),s.Hb(3),s.Lc("T\u1ed5ng s\u1ed1 nhi\xean li\u1ec7u \u0111\u01b0\u1ee3c c\u1ea5p: ",s.mc(12,5,(t.newUsed-t.itemSelected.preUsed)*t.itemSelected.quota/100+(t.timeCrane*t.itemSelected.quotaCrane||0),"0.0-1")," l\xedt")}}function v(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div",23),s.Yb(1,"div",24),s.Yb(2,"div",25),s.Yb(3,"div",26),s.Yb(4,"h5",27),s.Jc(5),s.Xb(),s.Yb(6,"button",28),s.Yb(7,"span",29),s.Jc(8,"\xd7"),s.Xb(),s.Xb(),s.Xb(),s.Yb(9,"div",30),s.Yb(10,"form",31),s.Yb(11,"div",32),s.Yb(12,"h6"),s.Jc(13,"S\u1ed1 km:"),s.Xb(),s.Yb(14,"input",33),s.fc("input",(function(){return s.zc(t),s.jc().used()})),s.Xb(),s.Hc(15,g,4,0,"div",34),s.Yb(16,"h6"),s.Jc(17,"S\u1ed1 nhi\xean li\u1ec7u \u0111\xe3 t\u1ea1m \u1ee9ng "),s.Xb(),s.Tb(18,"input",35),s.Tb(19,"hr"),s.Hc(20,Y,13,8,"div",36),s.Xb(),s.Xb(),s.Xb(),s.Yb(21,"div",37),s.Yb(22,"button",38),s.fc("click",(function(){return s.zc(t),s.jc().resetModal()})),s.Jc(23,"H\u1ee7y"),s.Xb(),s.Yb(24,"button",39),s.fc("click",(function(){return s.zc(t),s.jc().submit()})),s.Jc(25,"L\u01b0u"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=s.jc();s.Hb(5),s.Mc("Ch\u1ed1t s\u1ed1 km xe ",t.itemSelected.brand," - ",t.itemSelected.label,""),s.Hb(5),s.pc("formGroup",t.main),s.Hb(5),s.pc("ngIf",t.itemSelected.quotaCrane>0),s.Hb(5),s.pc("ngIf",t.newUsed>0||t.timeCrane>0),s.Hb(4),s.pc("disabled",!t.main.valid)}}let X=(()=>{class t{constructor(t,e,i,c){this.fb=t,this.plus=e,this.vehicleService=i,this.settlementService=c,this.api="settlement/",this.vehicles=[],this.vehiclesFilter=[],this.vehiclesCheck=[],this.loading=!0,this.loadMoreBtn=!1,this.today=this.plus.dateYMD((new Date).toISOString()),this.newUsed=0,this.timeCrane=0,this.data=[[1,2],[3,4]],this.wopts={bookType:"xlsx",type:"array"},this.fileName="SheetJS.xlsx",this.month=null,this.main=this.fb.group({preUsed:[,[a.s.required]],used:[,[a.s.required]],timeCrane:[0,[a.s.max(255)]],fuelAdvance:[0,[]],quotaSet:[,[a.s.required]]}),this.search=this.fb.group({what:["",[a.s.minLength(3),a.s.maxLength(100)]]}),this.dateForm=this.fb.group({date:[this.today,[a.s.required]]})}ngOnInit(){this.getVehicles()}getVehicles(){this.vehicleService.get().subscribe(t=>{t?(this.vehicles=t,this.getVehiclesCheck()):this.plus.alertToasrt({war:"Vui l\xf2ng th\u1eed l\u1ea1i sau v\xe0i ph\xfat"})}),this.loading=!1}getVehiclesCheck(){this.loading=!0;const t=this.dateForm.value.date.slice(0,7);this.month=t,console.log(t),this.plus.httpGet(this.api+"getByMonth/"+t).subscribe(t=>{console.log(t),this.plus.alertToasrt(t),t?(this.vehiclesCheck=t,this.vehiclesFilter=this.plus.compareObj(this.vehicles,t),console.log(this.vehiclesFilter)):this.plus.alertToasrt({err:"L\u1ed7i k\u1ebft n\u1ed1i"}),console.log(this.vehiclesCheck),this.loading=!1})}selectItem(t){console.log(t),this.itemSelected=t,this.main.controls.quotaSet.setValue(t.quota),this.main.controls.timeCrane.setValue(0),this.main.controls.fuelAdvance.setValue(0);const e=this.dateForm.get("date").value;this.plus.httpGet(this.api+"id/"+t._id+"/month/"+e).subscribe(t=>{console.log(t),t.length>0?(this.main.controls.preUsed.setValue(t[0].used),this.itemSelected.preUsed=t[0].used):(this.plus.alertToasrt({war:"B\u1ea1n ch\u01b0a ch\u1ed1t s\u1ed1 th\xe1ng tr\u01b0\u1edbc!"}),this.main.controls.preUsed.setValue(0),this.itemSelected.preUsed=0)}),console.log(this.itemSelected)}submit(){const t=this.main.value;t.month=this.dateForm.value.date.slice(0,7),t.vehicleId=this.itemSelected._id;const e=this.plus.generateData(t);console.log("SUBMIT -> ",e),this.plus.httpPost(this.api,e).subscribe(t=>{this.plus.alertToasrt(t),this.ngOnInit(),this.resetModal()})}resetModal(){this.plus.clickBtn("closeModal"),this.itemSelected=null,this.newUsed=0,this.main.reset()}delSettlement(t){confirm("Xo\xe1 m\u1ee5c n\xe0y?")?(this.loading=!0,console.log(t),this.plus.httpDelete(this.api,t).subscribe(t=>{this.plus.alertToasrt(t),this.ngOnInit()})):this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y"})}find(){this.search.valid&&this.search.valueChanges.pipe(Object(l.a)(2e3)).subscribe(t=>{console.log(t),this.loading=!0,t.what=this.plus.removeAccents(t.what),this.vehicleService.find(t).subscribe(t=>{t.length>0&&(this.vehicles=t.sort((t,e)=>t.dateModify-e.dateModify)),this.loadMoreBtn=!0,this.loading=!1})})}loadMore(){this.loading=!0;const t=Math.ceil(this.vehicles.length/10)+1,e=this.search.value;e.what=this.plus.removeAccents(e.what),e.page=t,this.vehicleService.find(e).subscribe(t=>{t.length>0?t.forEach(t=>{this.vehicles.push(t)}):(this.plus.alertToasrt({msg:"Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p \n Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm c\u1ee5 th\u1ec3 h\u01a1n"}),this.loadMoreBtn=!1),this.loading=!1})}toYM(t){return t.slice(0,6)}used(){this.newUsed=this.main.get("used").value,this.timeCrane=this.main.get("timeCrane").value}log(t){return console.log(t)}download(){const t=JSON.parse(localStorage.getItem("usrInfo"));t.unit&&t.fullName||this.plus.alertToasrt({err:"B\u1ea1n c\u1ea7n khai b\xe1o th\xeam th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"})}export(){this.vehicles.push("asdasasdas");const t=h.utils.table_to_sheet("settlement");console.log(t);const e=h.utils.book_new();h.utils.book_append_sheet(e,t,"Sheet1"),h.writeFile(e,this.fileName)}}return t.\u0275fac=function(e){return new(e||t)(s.Sb(a.c),s.Sb(n.a),s.Sb(b),s.Sb(r))},t.\u0275cmp=s.Mb({type:t,selectors:[["app-settlement"]],decls:10,vars:5,consts:[[1,"container"],[1,"form-group",3,"formGroup"],["for",""],["type","date","formControlName","date",1,"form-control",3,"change"],["class","text-center text-primary",4,"ngIf"],[1,"row"],["class","col",4,"ngIf"],["class","modal fade","id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",4,"ngIf"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],[1,"col"],[1,"text-center","text-success","py-2"],["aria-hidden","true",1,"fa","fa-download","text-primary",3,"click"],["id","settlement",1,"table","table-hover"],[1,"thead-default"],[4,"ngFor","ngForOf"],[3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"text-center","text-warning","py-2"],[1,"table","table-hover"],[1,"thead-inverse"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-primary",3,"click"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-primary"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],["type","number","placeholder","Nh\u1eadp s\u1ed1 km ch\u1ed1t trong th\xe1ng","formControlName","used",1,"form-control",3,"input"],[4,"ngIf"],["type","number","placeholder","Nh\u1eadp s\u1ed1 l\xedt nhi\xean li\u1ec7u \u0111\xe3 t\u1ea1m \u1ee9ng","formControlName","fuelAdvance",1,"form-control"],["class","calculator",4,"ngIf"],[1,"modal-footer"],["type","button","id","closeModal","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","number","placeholder","Nh\u1eadp s\u1ed1 l\xedt nhi\xean li\u1ec7u \u0111\xe3 t\u1ea1m \u1ee9ng","formControlName","timeCrane",1,"form-control",3,"input"],[1,"calculator"],[1,"text-danger","font-weight-bold"]],template:function(t,e){1&t&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Tb(2,"label",2),s.Jc(3,"Ch\u1ecdn th\xe1ng: "),s.Yb(4,"input",3),s.fc("change",(function(){return e.ngOnInit()})),s.Xb(),s.Xb(),s.Hc(5,d,2,0,"div",4),s.Yb(6,"div",5),s.Hc(7,p,17,1,"div",6),s.Hc(8,f,15,1,"div",6),s.Xb(),s.Xb(),s.Hc(9,v,26,6,"div",7)),2&t&&(s.Hb(1),s.pc("formGroup",e.dateForm),s.Hb(4),s.pc("ngIf",e.loading),s.Hb(2),s.pc("ngIf",e.vehiclesCheck.length>0),s.Hb(1),s.pc("ngIf",e.vehiclesFilter.length>0),s.Hb(1),s.pc("ngIf",e.itemSelected))},directives:[a.k,a.e,a.b,a.j,a.d,c.m,c.l,a.u,a.o],pipes:[c.e],styles:[""]}),t})();var y=i("iInd");let k=(()=>{class t{constructor(t,e){this.http=t,this.plus=e,this.httpOptions=this.plus.getHeader(),this.apiUrl=this.plus.getApiUrl("order/"),this.collection="order"}get(){return this.http.get(this.apiUrl,this.httpOptions)}create(t){return this.http.post(this.apiUrl,t,this.httpOptions)}update(t){return this.http.put(this.apiUrl,t,this.httpOptions)}updateContact(t){return this.http.put(this.apiUrl+"contacts",t,this.httpOptions)}delete(t){return this.http.delete(this.apiUrl+t,this.httpOptions)}find(t){return this.http.post(this.apiUrl+"find",t,this.httpOptions)}getByDate(t){return this.http.post(this.apiUrl+"orderDate",t,this.httpOptions)}wait(t){return this.http.post(this.apiUrl+"wait",t,this.httpOptions)}cancelWait(t){return this.http.delete(this.apiUrl+"wait/"+t,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(s.cc(o.a),s.cc(n.a))},t.\u0275prov=s.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class H{}function I(t,e){1&t&&(s.Yb(0,"div",17),s.Tb(1,"i",18),s.Xb())}function J(t,e){if(1&t){const t=s.Zb();s.Yb(0,"button",20),s.fc("click",(function(){s.zc(t);const e=s.jc().$implicit;return s.jc(2).compOrder(e)})),s.Jc(1," \u0110i gh\xe9p "),s.Xb()}}function x(t,e){if(1&t&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Jc(2),s.Xb(),s.Yb(3,"td"),s.Jc(4),s.Xb(),s.Yb(5,"td"),s.Jc(6),s.Xb(),s.Yb(7,"td"),s.Jc(8),s.Xb(),s.Yb(9,"td"),s.Jc(10),s.Xb(),s.Yb(11,"td"),s.Hc(12,J,2,0,"button",19),s.Xb(),s.Xb()),2&t){const t=e.$implicit;s.Hb(2),s.Kc(t.vehicleId.type),s.Hb(2),s.Kc(t.vehicleId.label),s.Hb(2),s.Kc(t.how),s.Hb(2),s.Kc(t.pointDes||"Xe \u0111ang \u0111\u01b0\u1ee3c ng\u01b0\u1eddi kh\xe1c \u0111\u0103ng k\xfd"),s.Hb(2),s.Kc(1===t.orderStatus?"\u0110\xe3 duy\u1ec7t":"Ch\u1edd duy\u1ec7t"),s.Hb(2),s.pc("ngIf",0===t.orderStatus)}}function S(t,e){if(1&t&&(s.Yb(0,"tbody"),s.Hc(1,x,13,6,"tr",15),s.Xb()),2&t){const t=s.jc();s.Hb(1),s.pc("ngForOf",t.orderList)}}function T(t,e){if(1&t){const t=s.Zb();s.Yb(0,"tr"),s.Yb(1,"td"),s.Jc(2),s.Xb(),s.Yb(3,"td"),s.Jc(4),s.Xb(),s.Yb(5,"td"),s.Yb(6,"button",21),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc().order(i)})),s.Jc(7," \u0110\u0103ng k\xfd "),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit,i=s.jc();s.Hb(2),s.Kc(t.label),s.Hb(2),s.Kc(t.type),s.Hb(2),s.rc("routerLink","/dangkyxe/token/",i.token,"")}}function w(t,e){if(1&t&&(s.Yb(0,"h6"),s.Jc(1),s.Xb()),2&t){const t=e.$implicit;s.Hb(1),s.Kc(t)}}function C(t,e){if(1&t){const t=s.Zb();s.Yb(0,"h6"),s.Jc(1),s.Yb(2,"i",38),s.fc("click",(function(){s.zc(t);const i=e.index;return s.jc(2).delContact(i)})),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit;s.Hb(1),s.Lc("",t," ")}}function O(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div",22),s.Yb(1,"div",23),s.Yb(2,"div",24),s.Yb(3,"div",25),s.Yb(4,"h5",26),s.Jc(5,"\u0110\u0102NG K\xdd \u0110I GH\xc9P"),s.Xb(),s.Yb(6,"button",27),s.Yb(7,"span",28),s.Jc(8,"\xd7"),s.Xb(),s.Xb(),s.Xb(),s.Yb(9,"div",29),s.Yb(10,"div",0),s.Yb(11,"div",6),s.Yb(12,"div",12),s.Yb(13,"h6"),s.Jc(14,"S\u1ed1 ng\u01b0\u1eddi \u0111i:"),s.Xb(),s.Xb(),s.Yb(15,"div",7),s.Yb(16,"h6"),s.Jc(17),s.Xb(),s.Xb(),s.Tb(18,"hr"),s.Xb(),s.Yb(19,"div",6),s.Yb(20,"div",12),s.Yb(21,"h6"),s.Jc(22,"C\xf4ng t\xe1c:"),s.Xb(),s.Xb(),s.Yb(23,"div",7),s.Yb(24,"h6"),s.Jc(25),s.Xb(),s.Xb(),s.Tb(26,"hr"),s.Xb(),s.Yb(27,"div",6),s.Yb(28,"div",12),s.Yb(29,"h6"),s.Jc(30,"Gi\u1edd \u0111i:"),s.Xb(),s.Xb(),s.Yb(31,"div",7),s.Yb(32,"h6"),s.Jc(33),s.Xb(),s.Xb(),s.Tb(34,"hr"),s.Xb(),s.Yb(35,"div",6),s.Yb(36,"div",12),s.Yb(37,"h6"),s.Jc(38,"Ng\xe0y \u0111i:"),s.Xb(),s.Xb(),s.Yb(39,"div",7),s.Yb(40,"h6"),s.Jc(41),s.kc(42,"date"),s.Xb(),s.Xb(),s.Tb(43,"hr"),s.Xb(),s.Yb(44,"div",6),s.Yb(45,"div",12),s.Yb(46,"h6"),s.Jc(47,"Gi\u1edd v\u1ec1:"),s.Xb(),s.Xb(),s.Yb(48,"div",7),s.Yb(49,"h6"),s.Jc(50),s.Xb(),s.Xb(),s.Tb(51,"hr"),s.Xb(),s.Yb(52,"div",6),s.Yb(53,"div",12),s.Yb(54,"h6"),s.Jc(55,"Ng\xe0y v\u1ec1:"),s.Xb(),s.Xb(),s.Yb(56,"div",7),s.Yb(57,"h6"),s.Jc(58),s.kc(59,"date"),s.Xb(),s.Xb(),s.Tb(60,"hr"),s.Xb(),s.Yb(61,"div",6),s.Yb(62,"div",12),s.Yb(63,"h6"),s.Jc(64,"\u0110i\u1ec3m xu\u1ea5t ph\xe1t:"),s.Xb(),s.Xb(),s.Yb(65,"div",7),s.Yb(66,"h6"),s.Jc(67),s.Xb(),s.Xb(),s.Tb(68,"hr"),s.Xb(),s.Yb(69,"div",6),s.Yb(70,"div",12),s.Yb(71,"h6"),s.Jc(72,"\u0110i\u1ec3m cu\u1ed1i:"),s.Xb(),s.Xb(),s.Yb(73,"div",7),s.Yb(74,"h6"),s.Jc(75),s.Xb(),s.Xb(),s.Tb(76,"hr"),s.Xb(),s.Yb(77,"div",6),s.Yb(78,"div",12),s.Yb(79,"h6"),s.Jc(80,"Li\xean h\u1ec7:"),s.Xb(),s.Xb(),s.Yb(81,"div",7),s.Hc(82,w,2,1,"h6",15),s.Hc(83,C,3,1,"h6",15),s.Yb(84,"form",30),s.Tb(85,"input",31),s.Yb(86,"button",32),s.fc("click",(function(){return s.zc(t),s.jc().addContact()})),s.Jc(87,"Th\xeam li\xean h\u1ec7"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(88,"div",33),s.Yb(89,"button",34),s.fc("click",(function(){return s.zc(t),s.jc().resetModal()})),s.Tb(90,"i",35),s.Xb(),s.Yb(91,"button",36),s.fc("click",(function(){return s.zc(t),s.jc().updateOrderContact()})),s.Tb(92,"i",37),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=s.jc();s.Hb(17),s.Lc("",t.orderSelected.how," ng\u01b0\u1eddi"),s.Hb(8),s.Kc(t.orderSelected.todo),s.Hb(8),s.Kc(t.orderSelected.timeGo),s.Hb(8),s.Kc(s.mc(42,12,t.orderSelected.dateGo,"dd/MM/yyyy")),s.Hb(9),s.Kc(t.orderSelected.timeBack),s.Hb(8),s.Kc(s.mc(59,15,t.orderSelected.dayBack,"dd/MM/yyyy")),s.Hb(9),s.Kc(t.orderSelected.pointGo),s.Hb(8),s.Kc(t.orderSelected.pointDes),s.Hb(7),s.pc("ngForOf",t.orderSelected.contact),s.Hb(1),s.pc("ngForOf",t.contacts),s.Hb(1),s.pc("formGroup",t.contactForm),s.Hb(7),s.pc("disabled",0===t.contacts.length)}}let M=(()=>{class t{constructor(t,e,i,c){this.plus=t,this.orderSV=e,this.vehicleSV=i,this.fb=c,this.vehicles=[],this.vehiclesWait=[],this.orderList=[],this.loading=!0,this.loadMoreBtn=!1,this.contacts=[],this.api="order/",this.today=this.plus.dateYMD((new Date).toISOString()),this.token=(new Date).getTime()+18e4,this.search=this.fb.group({what:["",[a.s.minLength(3),a.s.maxLength(100)]]}),this.dateForm=this.fb.group({dateGo:[this.today,[a.s.required,a.s.minLength(10),a.s.maxLength(10)]]}),this.contactForm=this.fb.group({pesonnel:["",a.s.required]})}ngOnInit(){this.getVehicles()}find(){this.search.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{this.search.valid&&(t.what=this.plus.removeAccents(t.what),this.loading=!0,this.orderSV.find(t).subscribe(t=>{t.length>0&&(this.orderList=t.sort((t,e)=>t.dateModify-e.dateModify)),this.loadMoreBtn=!0,this.loading=!1}))})}getVehicles(){this.plus.httpGet("vehicle/order/").subscribe(t=>{t?(this.vehicles=t,this.getOrderDay(this.today)):this.plus.alertToasrt({war:"Vui l\xf2ng th\u1eed l\u1ea1i sau v\xe0i ph\xfat"})}),this.loading=!1}getOrders(){const t=this.dateForm.value;this.dateForm.valid&&(this.loading=!0,this.orderList=[],this.plus.httpPost("order/orderDate",t).subscribe(t=>{this.plus.alertToasrt(t),this.vehiclesWait=this.plus.compareObj(this.vehicles,t),this.loading=!1,this.orderList=t,this.delWait(t)}))}getOrderDay(t){this.plus.httpPost("order/orderDate",{dateGo:t}).subscribe(t=>{this.plus.alertToasrt(t),this.vehiclesWait=this.plus.compareObj(this.vehicles,t),this.loading=!1,this.orderList=t,this.delWait(t)})}loadMore(){this.loading=!0;const t=Math.ceil(this.orderList.length/10)+1,e=this.search.value;e.what=this.plus.removeAccents(e.what),e.page=t,this.orderSV.find(e).subscribe(t=>{t.length>0?t.forEach(t=>{this.orderList.push(t)}):(this.plus.alertToasrt({msg:"Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p \n Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm c\u1ee5 th\u1ec3 h\u01a1n"}),this.loadMoreBtn=!1),this.loading=!1})}resetModal(){this.contacts=[]}wait(t){this.orderSV.vehicle=t;const e=this.dateForm.value;this.orderSV.dateGo=e.dateGo,this.orderSV.wait({vehicleId:t._id,dateGo:e.dateGo}).subscribe(t=>this.plus.alertToasrt(t))}delWait(t){const e=Date.now();t.length>0&&t.forEach((t,i)=>{3===t.orderStatus&&t.canEdit-e<0&&this.plus.httpDelete("order/wait/",t._id).subscribe(t=>{t.id&&this.getOrders()})})}order(t){const e=this.dateForm.value;e.vehicle=t,e.token=this.token,console.log(e),localStorage.setItem("order",JSON.stringify(e))}compOrder(t){this.orderSelected=t}addContact(){this.contacts.push(this.contactForm.value.pesonnel),this.contactForm.reset()}delContact(t){this.contacts.splice(t,1)}updateOrderContact(){this.orderSelected.contact=this.contacts.concat(this.orderSelected.contact);const t=this.plus.addKeyWord(this.orderSelected),e=new H;e._id=this.orderSelected._id,e.contact=t.contact,e.keyWord=t.keyWord,this.orderSV.updateContact(e).subscribe(t=>{this.plus.alertToasrt(t),this.plus.clickBtn("closeModal")}),this.contacts=[]}}return t.\u0275fac=function(e){return new(e||t)(s.Sb(n.a),s.Sb(k),s.Sb(b),s.Sb(a.c))},t.\u0275cmp=s.Mb({type:t,selectors:[["app-order-list"]],decls:41,vars:5,consts:[[1,"container-fluid"],[1,"text-center","bg-warning","py-2","rounded"],[1,"form-group",3,"formGroup"],["for",""],["type","date","formControlName","dateGo",1,"form-control",3,"change"],["class","text-center text-primary",4,"ngIf"],[1,"row"],[1,"col-sm-8"],[1,"text-center","bg-info","py-2","rounded"],[1,"table","table-hover","table-inverse"],[1,"thead-inverse"],[4,"ngIf"],[1,"col-sm-4"],[1,"text-center","bg-success","py-2","rounded"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","modal fade","id","modelId","tabindex","-1",4,"ngIf"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],["type","button","class","btn btn-outline-success mx-1","data-toggle","modal","data-target","#modelId",3,"click",4,"ngIf"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-outline-success","mx-1",3,"click"],["type","button",1,"btn","btn-outline-success",3,"routerLink","click"],["id","modelId","tabindex","-1",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"contact",3,"formGroup"],["type","text","placeholder","H\u1ecd v\xe0 t\xean + s\u1ed1 \u0111i\u1ec7n tho\u1ea1i, N\u01a1i \u0111\xf3n ...","required","","formControlName","pesonnel",1,"form-control","mb-2"],[1,"btn","btn-outline-info","my-1",3,"click"],[1,"modal-footer"],["type","button","id","closeModal","data-dismiss","modal",1,"btn","btn-outline-danger","mx-2",3,"click"],[1,"fa","fa-times","text-danger"],["type","button",1,"btn","btn-outline-primary","mx-2",3,"disabled","click"],[1,"fa","fa-floppy-o"],[1,"fa","fa-trash","text-danger",3,"click"]],template:function(t,e){1&t&&(s.Yb(0,"div",0),s.Yb(1,"h4",1),s.Jc(2,"\u0110\u0102NG K\xdd XE C\xd4NG T\xc1C"),s.Xb(),s.Yb(3,"div",2),s.Tb(4,"label",3),s.Jc(5,"Ch\u1ecdn ng\xe0y \u0111i: "),s.Yb(6,"input",4),s.fc("change",(function(){return e.getOrders()})),s.Xb(),s.Xb(),s.Hc(7,I,2,0,"div",5),s.Yb(8,"div",6),s.Yb(9,"div",7),s.Yb(10,"h5",8),s.Jc(11,"DANH S\xc1CH XE \u0110\xc3 \u0110\u0102NG K\xdd"),s.Xb(),s.Yb(12,"table",9),s.Yb(13,"thead",10),s.Yb(14,"tr"),s.Yb(15,"th"),s.Jc(16,"Lo\u1ea1i xe"),s.Xb(),s.Yb(17,"th"),s.Jc(18,"Bi\u1ec3n s\u1ed1"),s.Xb(),s.Yb(19,"th"),s.Jc(20,"S\u1ed1 ng\u01b0\u1eddi \u0111i"),s.Xb(),s.Yb(21,"th"),s.Jc(22,"\u0110i\u1ec3m \u0111\u1ebfn"),s.Xb(),s.Yb(23,"th"),s.Jc(24,"Tr\u1ea1ng th\xe1i"),s.Xb(),s.Tb(25,"th"),s.Xb(),s.Xb(),s.Hc(26,S,2,1,"tbody",11),s.Xb(),s.Xb(),s.Yb(27,"div",12),s.Yb(28,"h5",13),s.Jc(29,"DANH S\xc1CH XE CH\u1edc"),s.Xb(),s.Yb(30,"table",9),s.Yb(31,"thead",10),s.Yb(32,"tr"),s.Yb(33,"th"),s.Jc(34,"Bi\u1ec3n s\u1ed1"),s.Xb(),s.Yb(35,"th"),s.Jc(36,"Lo\u1ea1i xe"),s.Xb(),s.Tb(37,"th",14),s.Xb(),s.Xb(),s.Yb(38,"tbody"),s.Hc(39,T,8,3,"tr",15),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Hc(40,O,93,18,"div",16),s.Xb()),2&t&&(s.Hb(3),s.pc("formGroup",e.dateForm),s.Hb(4),s.pc("ngIf",e.loading),s.Hb(19),s.pc("ngIf",e.orderList.length>0),s.Hb(13),s.pc("ngForOf",e.vehiclesWait),s.Hb(1),s.pc("ngIf",e.orderSelected))},directives:[a.k,a.e,a.b,a.j,a.d,c.m,c.l,y.c,a.u,a.q],pipes:[c.d],styles:[""]}),t})();function N(t,e){1&t&&(s.Yb(0,"div",7),s.Tb(1,"i",8),s.Xb())}function j(t,e){if(1&t){const t=s.Zb();s.Yb(0,"button",16),s.fc("click",(function(){s.zc(t);const e=s.jc().$implicit;return s.jc(2).onDelete(e)})),s.Tb(1,"i",17),s.Xb()}}function D(t,e){if(1&t){const t=s.Zb();s.Yb(0,"tr"),s.Yb(1,"td"),s.Jc(2),s.Xb(),s.Yb(3,"td"),s.Jc(4),s.kc(5,"date"),s.Xb(),s.Yb(6,"td"),s.Jc(7),s.kc(8,"date"),s.Xb(),s.Yb(9,"td"),s.Jc(10),s.Xb(),s.Yb(11,"td",11),s.Yb(12,"button",13),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(2).download(i)})),s.Tb(13,"i",14),s.Xb(),s.Hc(14,j,2,0,"button",15),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit;s.Hb(2),s.Kc(t.todo),s.Hb(2),s.Kc(s.mc(5,5,t.dateGo,"dd/MM/yyyy")),s.Hb(3),s.Kc(s.mc(8,8,t.dayBack,"dd/MM/yyyy")),s.Hb(3),s.Kc(t.pointDes),s.Hb(4),s.pc("ngIf",1!==t.orderStatus)}}function G(t,e){if(1&t&&(s.Yb(0,"table",9),s.Yb(1,"thead",10),s.Yb(2,"tr"),s.Yb(3,"th"),s.Jc(4,"C\xf4ng t\xe1c"),s.Xb(),s.Yb(5,"th"),s.Jc(6,"Ng\xe0y \u0111i"),s.Xb(),s.Yb(7,"th"),s.Jc(8,"Ng\xe0y v\u1ec1"),s.Xb(),s.Yb(9,"th"),s.Jc(10,"\u0110i\u1ec3m c\xf4ng t\xe1c"),s.Xb(),s.Tb(11,"th",11),s.Xb(),s.Xb(),s.Yb(12,"tbody"),s.Hc(13,D,15,11,"tr",12),s.Xb(),s.Xb()),2&t){const t=s.jc();s.Hb(13),s.pc("ngForOf",t.datalist)}}function L(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div",11),s.Yb(1,"button",18),s.fc("click",(function(){return s.zc(t),s.jc().loadMore()})),s.Jc(2," K\u1ebft qu\u1ea3 kh\xe1c "),s.Xb(),s.Xb()}}const B=function(t){return{loading:t}};let K=(()=>{class t{constructor(t,e,i,c){this.plus=t,this.DB=e,this.fb=i,this.vehicleSV=c,this.vehicles=[],this.loading=!0,this.search=this.fb.group({what:["",[a.s.minLength(3),a.s.maxLength(100)]]})}ngOnInit(){this.getOrders(),this.find()}getOrders(){this.DB.get().subscribe(t=>{this.loading=!1,this.datalist=t,this.plus.alertToasrt(t)})}getVehicles(){this.vehicleSV.get().subscribe(t=>{this.vehicles=t,this.plus.alertToasrt(t)})}find(){this.search.valid&&this.search.valueChanges.pipe(Object(l.a)(1e3)).subscribe(t=>{t.what=this.plus.removeAccents(t.what),this.loading=!0,this.DB.find(t).subscribe(t=>{t.length>0?this.datalist=t.sort((t,e)=>t.dateModify-e.dateModify):this.plus.alertToasrt({msg:"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p!"}),this.loadMoreBtn=!0,this.loading=!1})})}loadMore(){this.loading=!0;const t=Math.ceil(this.datalist.length/10)+1,e=this.search.value;e.what=this.plus.removeAccents(e.what),e.page=t,this.DB.find(e).subscribe(t=>{t.length>0?t.forEach(t=>{this.datalist.push(t)}):(this.plus.alertToasrt({msg:"Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p \n Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm c\u1ee5 th\u1ec3 h\u01a1n"}),this.loadMoreBtn=!1),this.loading=!1})}onEdit(t){console.log(t)}onDelete(t){console.log(t),1===t.orderStatus?this.plus.alertToasrt({err:"Vui l\xf2ng kh\xf4ng th\u1ef1c hi\u1ec7n l\u1ea1i! T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n s\u1ebd b\u1ecb kho\xe1!"}):this.DB.delete(t._id).subscribe(t=>{this.plus.alertToasrt(t),this.getOrders()})}download(t){JSON.parse(localStorage.getItem("usrInfo")).unit||this.plus.alertToasrt({err:"B\u1ea1n c\u1ea7n khai b\xe1o th\xeam th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"}),console.log(t);const e=Object.assign({},t);e.dateGo=this.plus.dateToDMY(e.dateGo),e.dayBack=this.plus.dateToDMY(e.dayBack)}}return t.\u0275fac=function(e){return new(e||t)(s.Sb(n.a),s.Sb(k),s.Sb(a.c),s.Sb(b))},t.\u0275cmp=s.Mb({type:t,selectors:[["app-order-manager"]],decls:8,vars:7,consts:[[1,"container"],[1,"text-primary","text-center","bg-white","py-2","rounded"],[1,"form-group",3,"formGroup"],["list","students","type","text","formControlName","what","aria-describedby","helpId","placeholder","Nh\u1eadp th\xf4ng tin b\u1ea1n c\u1ea7n t\xecm","autocomplete","on",1,"form-control","text-danger",3,"ngClass"],["class","text-center text-primary",4,"ngIf"],["class","table table-hover table-inverse",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],[1,"table","table-hover","table-inverse"],[1,"thead-inverse"],[1,"text-center"],[4,"ngFor","ngForOf"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-outline-primary","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-print","text-info"],["type","button","class","btn btn-outline-danger mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash"],["type","button",1,"btn","btn-outline-primary",3,"click"]],template:function(t,e){1&t&&(s.Yb(0,"div",0),s.Yb(1,"h4",1),s.Jc(2," DANH S\xc1CH XE \u0110\xc3 \u0110\u0102NG K\xdd "),s.Xb(),s.Yb(3,"div",2),s.Tb(4,"input",3),s.Xb(),s.Hc(5,N,2,0,"div",4),s.Hc(6,G,14,1,"table",5),s.Hc(7,L,3,0,"div",6),s.Xb()),2&t&&(s.Hb(3),s.pc("formGroup",e.search),s.Hb(1),s.pc("ngClass",s.uc(5,B,e.loading)),s.Hb(1),s.pc("ngIf",e.loading),s.Hb(1),s.pc("ngIf",e.datalist),s.Hb(1),s.pc("ngIf",e.loadMoreBtn))},directives:[a.k,a.e,a.b,a.j,a.d,c.k,c.m,c.l],pipes:[c.d],styles:[""]}),t})(),F=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Mb({type:t,selectors:[["app-vehicle"]],decls:2,vars:0,template:function(t,e){1&t&&(s.Yb(0,"p"),s.Jc(1,"vehicle !"),s.Xb())},styles:[""]}),t})();function V(t,e){if(1&t&&(s.Yb(0,"h4",4),s.Jc(1),s.Xb()),2&t){const t=s.jc();s.Hb(1),s.Mc("Lo\u1ea1i xe: ",t.vehicle.type," - Bi\u1ec3n s\u1ed1: ",t.vehicle.label,"")}}function U(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div"),s.Yb(1,"p"),s.Jc(2),s.Yb(3,"i",23),s.fc("click",(function(){s.zc(t);const i=e.index;return s.jc().delContact(i)})),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit,i=e.index;s.Hb(2),s.Mc("",i+1,"./ ",t," ")}}function q(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div",24),s.Yb(1,"button",25),s.fc("click",(function(){return s.zc(t),s.jc().submit()})),s.Tb(2,"i",26),s.Xb(),s.Yb(3,"button",27),s.fc("click",(function(){return s.zc(t),s.jc().back()})),s.Tb(4,"i",28),s.Xb(),s.Xb()}if(2&t){const t=s.jc();s.Hb(1),s.pc("disabled",!t.main.valid||0===t.contact.length)}}function z(t,e){1&t&&s.Tb(0,"option",29),2&t&&s.qc("value",e.$implicit)}let $=(()=>{class t{constructor(t,e,i,c,n,s,o){this.plus=t,this.DB=e,this.vehicleSV=i,this.fb=c,this.router=n,this.location=s,this.route=o,this.api="order/",this.vehicle=null,this.loading=!0,this.loadMoreBtn=!1,this.dateGo=null,this.contact=[],this.timeOut=!1,this.waitId="",this.token=null,this.over=null,this.time=[],this.main=this.fb.group({how:[,[a.s.required]],todo:[,[a.s.required]],timeGo:[,[a.s.required,a.s.minLength(5)]],dateGo:[,[a.s.required]],timeBack:[,[a.s.required,a.s.minLength(5)]],dayBack:[this.dateGo,[a.s.required]],pointGo:[],pointDes:[,[a.s.required]]}),this.contactForm=this.fb.group({pesonnel:["",a.s.required]})}ngOnInit(){clearInterval(this.over),this.getById(),this.timeInit()}getById(){const t=JSON.parse(localStorage.getItem("order"));if(console.log(t),!t||t.token<Date.now()||t.token-Date.now()>19e4)return this.router.navigate(["/dangkyxe"]);this.token=t.token,this.vehicle=t.vehicle,this.countDown(),this.plus.alertToasrt({msg:"Xe \u0111\u01b0\u1ee3c gi\u1eef cho b\u1ea1n 03 ph\xfat \u0111\u1ec3 ho\xe0n t\u1ea5t th\xf4ng tin!"}),this.main.controls.dateGo.setValue(t.dateGo),this.main.controls.dayBack.setValue(t.dateGo),this.plus.httpPost(this.api+"wait",{vehicleId:t.vehicle._id,dateGo:t.dateGo}).subscribe(t=>{this.waitId=t.id})}addContact(){this.contact.push(this.contactForm.value.pesonnel),this.contactForm.reset()}delContact(t){this.contact.splice(t,1)}submit(){const t=this.main.value;if(t.vehicleId=this.vehicle._id,t.driverId=this.vehicle.manager._id,t.contact=this.contact,new Date(t.dateGo)>new Date(t.dayBack))this.plus.alertToasrt({war:"Ng\xe0y v\u1ec1 ph\u1ea3i sau ng\xe0y \u0111i"});else{const e=this.plus.generateData(t);console.log(e),this.DB.create(e).subscribe(t=>{t.msg?(this.plus.alertToasrt(t),this.location.back(),clearInterval(this.over)):this.plus.alertToasrt(t)})}}back(){clearInterval(this.over),this.location.back(),this.plus.httpDelete(this.api+"wait/",this.waitId).subscribe(t=>{this.plus.alertToasrt(t)})}countDown(){clearInterval(this.over),this.over=setInterval(()=>{const t=(new Date).getTime(),e=+this.token-t,i=Math.floor(e%36e5/6e4),c=Math.floor(e%6e4/1e3);this.remain=Math.round(100*(60*i+c)/180),console.log(this.over),localStorage.setItem("over",this.over),e<0&&(clearInterval(this.over),this.back())},2e3)}timeOver(){const t=setTimeout(()=>{clearInterval(this.over),console.log("timeOver()",this.over),this.router.navigate(["/dangkyxe"])},18e4);console.log(t)}timeInit(){const t=[];for(let e=0;e<23;)e<10?(t.push("0"+e+"g00"),t.push("0"+e+"g30")):(t.push(e+"g00"),t.push(e+"g30")),e++;return this.time=t}}return t.\u0275fac=function(e){return new(e||t)(s.Sb(n.a),s.Sb(k),s.Sb(b),s.Sb(a.c),s.Sb(y.b),s.Sb(c.i),s.Sb(y.a))},t.\u0275cmp=s.Mb({type:t,selectors:[["app-order"]],decls:40,vars:8,consts:[[1,"container"],[1,"text-center","bg-warning","py-2","rounded"],["class","font-weight-bold",4,"ngIf"],["id","orderVehicle",3,"formGroup"],[1,"font-weight-bold"],["type","number","placeholder","S\u1ed1 ng\u01b0\u1eddi \u0111i","required","","formControlName","how",1,"form-control","mb-2"],["type","text","placeholder","N\u1ed9i dung c\xf4ng t\xe1c","required","","formControlName","todo",1,"form-control","mb-2"],[1,"row"],[1,"col-sm"],["type","text","list","time","placeholder","VD: 05g30","formControlName","timeGo",1,"form-control","mb-2"],["type","text","list","time","placeholder","VD: 16g30","formControlName","timeBack",1,"form-control","mb-2"],["type","date","placeholder","Ng\xe0y v\u1ec1","required","","formControlName","dayBack",1,"form-control","mb-2"],["type","text","placeholder","\u0110i\u1ec3m \u0111\u1ebfn","autocomplete","on","required","","formControlName","pointDes",1,"form-control","mb-2"],[4,"ngFor","ngForOf"],[1,"contact",3,"formGroup"],["type","text","list","users","placeholder","H\u1ecd v\xe0 t\xean + s\u1ed1 \u0111i\u1ec7n tho\u1ea1i, N\u01a1i \u0111\xf3n ...","required","","formControlName","pesonnel",1,"form-control","mb-2"],[1,"btn","btn-outline-info","my-1",3,"click"],["id","users"],["class","action my-2 text-center","style","font-size: 24px",4,"ngIf"],[1,"progress","my-2"],["role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-animated","progress-bar-striped","bg-warning"],["id","time"],[3,"value",4,"ngFor","ngForOf"],[1,"fa","fa-trash","text-danger",3,"click"],[1,"action","my-2","text-center",2,"font-size","24px"],["type","button",1,"btn","btn-primary","mx-2","px-4",2,"font-size","24px",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-floppy-o"],["type","button",1,"btn","btn-second","px-4",2,"font-size","24px",3,"click"],[1,"fa","fa-times","text-danger"],[3,"value"]],template:function(t,e){1&t&&(s.Yb(0,"div",0),s.Yb(1,"h4",1),s.Jc(2,"\u0110\u0102NG K\xdd XE C\xd4NG T\xc1C "),s.Xb(),s.Hc(3,V,2,2,"h4",2),s.Yb(4,"form",3),s.Yb(5,"label",4),s.Jc(6,"S\u1ed1 ng\u01b0\u1eddi \u0111i"),s.Xb(),s.Tb(7,"input",5),s.Yb(8,"label",4),s.Jc(9,"C\xf4ng t\xe1c"),s.Xb(),s.Tb(10,"input",6),s.Yb(11,"div",7),s.Yb(12,"div",8),s.Yb(13,"label",4),s.Jc(14,"Gi\u1edd \u0111i"),s.Xb(),s.Tb(15,"input",9),s.Xb(),s.Yb(16,"div",8),s.Yb(17,"label",4),s.Jc(18,"Gi\u1edd v\u1ec1"),s.Xb(),s.Tb(19,"input",10),s.Xb(),s.Yb(20,"div",8),s.Yb(21,"label",4),s.Jc(22,"Ng\xe0y v\u1ec1"),s.Xb(),s.Tb(23,"input",11),s.Xb(),s.Xb(),s.Yb(24,"label",4),s.Jc(25,"\u0110\u1ecba \u0111i\u1ec3m c\xf4ng t\xe1c"),s.Xb(),s.Tb(26,"input",12),s.Yb(27,"label",4),s.Jc(28,"Li\xean h\u1ec7"),s.Xb(),s.Hc(29,U,4,2,"div",13),s.Xb(),s.Yb(30,"form",14),s.Tb(31,"input",15),s.Yb(32,"button",16),s.fc("click",(function(){return e.addContact()})),s.Jc(33,"Th\xeam li\xean h\u1ec7"),s.Xb(),s.Xb(),s.Tb(34,"datalist",17),s.Hc(35,q,5,1,"div",18),s.Yb(36,"div",19),s.Tb(37,"div",20),s.Xb(),s.Xb(),s.Yb(38,"datalist",21),s.Hc(39,z,1,1,"option",22),s.Xb()),2&t&&(s.Hb(3),s.pc("ngIf",e.vehicle),s.Hb(1),s.pc("formGroup",e.main),s.Hb(25),s.pc("ngForOf",e.contact),s.Hb(1),s.pc("formGroup",e.contactForm),s.Hb(5),s.pc("ngIf",e.waitId.length>0),s.Hb(2),s.Fc("width",e.remain+"%"),s.Hb(2),s.pc("ngForOf",e.time))},directives:[c.m,a.u,a.k,a.e,a.o,a.b,a.q,a.j,a.d,c.l,a.n,a.t],styles:[""]}),t})();function _(t,e){if(1&t){const t=s.Zb();s.Yb(0,"tr"),s.Yb(1,"td"),s.Jc(2),s.Xb(),s.Yb(3,"td",45),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(2).log(i)})),s.Jc(4),s.Xb(),s.Yb(5,"td"),s.Jc(6),s.kc(7,"date"),s.Xb(),s.Yb(8,"td"),s.Jc(9),s.kc(10,"date"),s.Xb(),s.Yb(11,"td"),s.Jc(12),s.kc(13,"number"),s.Xb(),s.Yb(14,"td"),s.Yb(15,"button",46),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(2).editItem(i)})),s.Tb(16,"i",47),s.Xb(),s.Yb(17,"button",48),s.fc("click",(function(){s.zc(t);const i=e.$implicit,c=e.index;return s.jc(2).delItem(i._id,c)})),s.Tb(18,"i",49),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit;s.Hb(2),s.Kc(t.vehicleId.label),s.Hb(2),s.Kc(t.regType),s.Hb(2),s.Kc(s.mc(7,5,t.fromDate,"dd/MM/yyyy")),s.Hb(3),s.Kc(s.mc(10,8,t.toDate,"dd/MM/yyyy")),s.Hb(3),s.Kc(s.lc(13,11,t.cost))}}function A(t,e){if(1&t&&(s.Yb(0,"tbody"),s.Hc(1,_,19,13,"tr",44),s.Xb()),2&t){const t=s.jc();s.Hb(1),s.pc("ngForOf",t.DBlist)}}function Z(t,e){1&t&&(s.Yb(0,"div",50),s.Tb(1,"i",51),s.Xb())}function P(t,e){if(1&t&&(s.Yb(0,"span"),s.Jc(1),s.Xb()),2&t){const t=s.jc();s.Hb(1),s.Lc(" ",t.itemSelected.vehicleId.label,"")}}function E(t,e){if(1&t){const t=s.Zb();s.Yb(0,"tr"),s.Yb(1,"td"),s.Jc(2),s.Xb(),s.Yb(3,"td"),s.Jc(4),s.Xb(),s.Yb(5,"td"),s.Jc(6),s.Xb(),s.Yb(7,"td"),s.Yb(8,"button",13),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(3).selectVehicle(i)})),s.Jc(9,"Ch\u1ecdn"),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit;s.Hb(2),s.Kc(t.label),s.Hb(2),s.Kc(t.type),s.Hb(2),s.Kc(t.brand)}}function W(t,e){if(1&t&&(s.Yb(0,"table",4),s.Yb(1,"thead",5),s.Yb(2,"tr"),s.Yb(3,"th"),s.Jc(4,"Bi\u1ec3n s\u1ed1"),s.Xb(),s.Yb(5,"th"),s.Jc(6,"Lo\u1ea1i xe"),s.Xb(),s.Yb(7,"th"),s.Jc(8,"Hi\u1ec7u xe"),s.Xb(),s.Tb(9,"th"),s.Xb(),s.Xb(),s.Yb(10,"tbody"),s.Hc(11,E,10,3,"tr",44),s.Xb(),s.Xb()),2&t){const t=s.jc(2);s.Hb(11),s.pc("ngForOf",t.vehicleList)}}const Q=function(t){return{loading:t}};function R(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div",2),s.Yb(1,"input",52),s.fc("change",(function(){return s.zc(t),s.jc().getVehicles()})),s.Xb(),s.Hc(2,W,12,1,"table",53),s.Xb()}if(2&t){const t=s.jc();s.pc("formGroup",t.searchVehicle),s.Hb(1),s.pc("ngClass",s.uc(3,Q,t.loading)),s.Hb(1),s.pc("ngIf",t.vehicleList.length>0)}}function tt(t,e){if(1&t&&(s.Yb(0,"div",27),s.Yb(1,"div",28),s.Yb(2,"h6"),s.Jc(3,"Xe:"),s.Xb(),s.Xb(),s.Yb(4,"div",29),s.Jc(5," \xa0"),s.Yb(6,"h6"),s.Jc(7),s.Xb(),s.Xb(),s.Xb()),2&t){const t=s.jc();s.Hb(7),s.Mc("",t.vehicleSelected.label," - ",t.vehicleSelected.brand,"")}}let et=(()=>{class t{constructor(t,e,i,c){this.plus=t,this.vehicleSV=e,this.fb=i,this.route=c,this.api="registry/",this.loading=!0,this.DBlist=[],this.vehicleList=[],this.vehicleSelected=null,this.today=this.plus.dateYMD((new Date).toISOString()),this.main=this.fb.group({_id:[,[]],vehicleId:[,[a.s.required]],regType:[,[a.s.required]],fromDate:[,[a.s.required]],toDate:[,[a.s.required]],cost:[,[]]}),this.search=this.fb.group({what:["",[a.s.minLength(4),a.s.maxLength(100)]]}),this.searchVehicle=this.fb.group({what:["",[a.s.minLength(4),a.s.maxLength(100)]]})}ngOnInit(){this.getReg(),this.find(),this.getVehicles()}getReg(){this.plus.httpPost(this.api+"find",{page:1}).subscribe(t=>{this.plus.alertToasrt(t),this.DBlist=t,this.loading=!1})}find(){this.search.valid&&this.search.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost(this.api+"find",t).subscribe(t=>{this.loading=!1,t.length>0&&(this.DBlist=t)})})}submit(){const t=this.plus.generateData(this.main.value);t._id?this.update(t):this.create(t),this.resetModal(),this.ngOnInit()}create(t){this.plus.httpPost(this.api,t).subscribe(e=>{this.plus.alertToasrt(e),e.msg&&(this.DBlist.push(t),this.plus.sortArr(this.DBlist,"dateModify"),this.resetModal()),this.getReg()})}update(t){this.plus.httpPut(this.api,t).subscribe(t=>{this.plus.alertToasrt(t),t.msg&&this.resetModal()})}resetModal(){this.plus.clickBtn("closeModal"),this.main.reset(),this.itemSelected=null,this.vehicleList=[]}loadMore(){const t=Math.ceil(this.DBlist.length/10)+1;this.plus.httpPost(this.api+"find",{page:t}).subscribe(t=>{t.length>0?t.forEach(t=>{this.DBlist.push(t)}):this.plus.alertToasrt({msg:"Kh\xf4ng\xa0c\xf2n\xa0k\u1ebft\xa0qu\u1ea3\xa0ph\xf9\xa0h\u1ee3p\xa0\n\xa0Nh\u1eadp\xa0n\u1ed9i\xa0dung\xa0c\u1ea7n\xa0t\xecm\xa0c\u1ee5\xa0th\u1ec3\xa0h\u01a1n"}),this.loading=!1})}addItem(){this.resetModal(),this.plus.clickBtn("openModal")}editItem(t){const e=t;this.itemSelected=e,e.fromDate=this.plus.UTCtoYMD(e.fromDate),e.toDate=this.plus.UTCtoYMD(e.toDate),this.main.patchValue(t),this.plus.clickBtn("openModal"),console.log(e)}delItem(t,e){this.plus.httpDelete(this.api,t).subscribe(t=>{this.plus.alertToasrt(t),t.msg&&this.DBlist.splice(e,1)})}getVehicles(){this.searchVehicle.valid&&this.searchVehicle.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost("vehicle/find",t).subscribe(t=>{this.loading=!1,t.length>0?this.vehicleList=t:this.plus.alertToasrt({war:"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p"})})})}selectVehicle(t){console.log(t),this.main.controls.vehicleId.setValue(t._id),this.vehicleSelected=t,this.vehicleList=[]}log(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Sb(n.a),s.Sb(b),s.Sb(a.c),s.Sb(y.a))},t.\u0275cmp=s.Mb({type:t,selectors:[["app-registry"]],decls:90,vars:11,consts:[[1,"container"],[1,"text-primary","text-center","bg-light","py-2","rounded"],[1,"form-group",3,"formGroup"],["list","students","type","text","formControlName","what","aria-describedby","helpId","placeholder","Nh\u1eadp th\xf4ng tin b\u1ea1n c\u1ea7n t\xecm","autocomplete","on",1,"form-control",3,"ngClass"],[1,"table","table-hover"],[1,"thead-default"],["type","button",1,"btn","btn-success","mx-1",3,"click"],[1,"fa","fa-plus"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],[4,"ngIf"],["class","text-center text-primary",4,"ngIf"],[1,"loadMore","text-center","my-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button","id","openModal","hidden","","data-toggle","modal","data-target","#modelId"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["myModal",""],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["class","form-group",3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","row",4,"ngIf"],[1,"row"],[1,"col-sm-4"],[1,"col-sm-8"],[1,"form-group"],["formControlName","regType",1,"form-control"],["value","\u0110\u0103ng ki\u1ec3m"],["value","C\u01b0\u1edbc \u0111\u01b0\u1eddng b\u1ed9"],["value","B\u1ea3o hi\u1ec3m b\u1eaft bu\u1ed9c"],["value","B\u1ea3o hi\u1ec3m v\u1eadt ch\u1ea5t"],["value","Ph\xed VTEC"],[1,"row","form-group"],["type","date","formControlName","fromDate",1,"form-control"],["type","date","formControlName","toDate",1,"form-control"],["type","number","formControlName","cost",1,"form-control"],[1,"modal-footer"],["id","closeModal","type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],[4,"ngFor","ngForOf"],[3,"click"],["type","button",1,"btn","btn-outline-success","mx-1",3,"click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],["type","text","required","","formControlName","what","placeholder","Nh\u1eadp th\xf4ng tin xe c\u1ea7n t\xecm v\xe0 ch\u1ecdn",1,"form-control",3,"ngClass","change"],["class","table table-hover",4,"ngIf"]],template:function(t,e){1&t&&(s.Yb(0,"div",0),s.Yb(1,"h4",1),s.Jc(2," H\u1ea0N D\xd9NG Y\xcaU C\u1ea6U "),s.Xb(),s.Yb(3,"div",2),s.Tb(4,"input",3),s.Xb(),s.Yb(5,"table",4),s.Yb(6,"thead",5),s.Yb(7,"tr"),s.Yb(8,"th"),s.Jc(9,"Xe"),s.Xb(),s.Yb(10,"th"),s.Jc(11,"Lo\u1ea1i h\u1ed3 s\u01a1"),s.Xb(),s.Yb(12,"th"),s.Jc(13,"Ng\xe0y s\u1eed d\u1ee5ng"),s.Xb(),s.Yb(14,"th"),s.Jc(15,"Ng\xe0y h\u1ebft h\u1ea1n"),s.Xb(),s.Yb(16,"th"),s.Jc(17,"S\u1ed1 ti\u1ec1n"),s.Xb(),s.Yb(18,"th"),s.Yb(19,"button",6),s.fc("click",(function(){return e.addItem()})),s.Tb(20,"i",7),s.Xb(),s.Yb(21,"button",8),s.fc("click",(function(){return e.ngOnInit()})),s.Tb(22,"i",9),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Hc(23,A,2,1,"tbody",10),s.Xb(),s.Hc(24,Z,2,0,"div",11),s.Yb(25,"div",12),s.Yb(26,"button",13),s.fc("click",(function(){return e.loadMore()})),s.Jc(27,"Xem th\xeam"),s.Xb(),s.Xb(),s.Xb(),s.Yb(28,"button",14),s.Jc(29,"Modal"),s.Xb(),s.Yb(30,"div",15,16),s.Yb(32,"div",17),s.Yb(33,"div",18),s.Yb(34,"div",19),s.Yb(35,"h5",20),s.Jc(36,"Nh\u1eadp th\xf4ng tin xe "),s.Hc(37,P,2,1,"span",10),s.Xb(),s.Yb(38,"button",21),s.Yb(39,"span",22),s.Jc(40,"\xd7"),s.Xb(),s.Xb(),s.Xb(),s.Yb(41,"div",23),s.Hc(42,R,3,5,"div",24),s.Yb(43,"form",25),s.Hc(44,tt,8,2,"div",26),s.Tb(45,"hr"),s.Yb(46,"div",27),s.Yb(47,"div",28),s.Yb(48,"h6"),s.Jc(49,"Lo\u1ea1i h\u1ed3 s\u01a1:"),s.Xb(),s.Xb(),s.Yb(50,"div",29),s.Yb(51,"div",30),s.Yb(52,"select",31),s.Yb(53,"option",32),s.Jc(54,"\u0110\u0103ng ki\u1ec3m"),s.Xb(),s.Yb(55,"option",33),s.Jc(56,"C\u01b0\u1edbc \u0111\u01b0\u1eddng b\u1ed9"),s.Xb(),s.Yb(57,"option",34),s.Jc(58,"B\u1ea3o hi\u1ec3m b\u1eaft bu\u1ed9c"),s.Xb(),s.Yb(59,"option",35),s.Jc(60,"B\u1ea3o hi\u1ec3m v\u1eadt ch\u1ea5t"),s.Xb(),s.Yb(61,"option",36),s.Jc(62,"Ph\xed VTEC"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Tb(63,"hr"),s.Yb(64,"div",37),s.Yb(65,"div",28),s.Yb(66,"h6"),s.Jc(67,"Ng\xe0y s\u1eed d\u1ee5ng:"),s.Xb(),s.Xb(),s.Yb(68,"div",29),s.Tb(69,"input",38),s.Xb(),s.Xb(),s.Tb(70,"hr"),s.Yb(71,"div",37),s.Yb(72,"div",28),s.Yb(73,"h6"),s.Jc(74,"Ng\xe0y h\u1ebft h\u1ea1n:"),s.Xb(),s.Xb(),s.Yb(75,"div",29),s.Tb(76,"input",39),s.Xb(),s.Xb(),s.Tb(77,"hr"),s.Yb(78,"div",37),s.Yb(79,"div",28),s.Yb(80,"h6"),s.Jc(81,"S\u1ed1 ti\u1ec1n:"),s.Xb(),s.Xb(),s.Yb(82,"div",29),s.Tb(83,"input",40),s.Xb(),s.Xb(),s.Tb(84,"hr"),s.Xb(),s.Xb(),s.Yb(85,"div",41),s.Yb(86,"button",42),s.Jc(87,"H\u1ee7y"),s.Xb(),s.Yb(88,"button",43),s.fc("click",(function(){return e.submit()})),s.Jc(89,"L\u01b0u"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&t&&(s.Hb(3),s.pc("formGroup",e.search),s.Hb(1),s.pc("ngClass",s.uc(9,Q,e.loading)),s.Hb(19),s.pc("ngIf",e.DBlist.length>0),s.Hb(1),s.pc("ngIf",e.loading),s.Hb(13),s.pc("ngIf",e.itemSelected),s.Hb(5),s.pc("ngIf",!e.itemSelected),s.Hb(1),s.pc("formGroup",e.main),s.Hb(1),s.pc("ngIf",e.vehicleSelected),s.Hb(44),s.pc("disabled",!e.main.valid))},directives:[a.k,a.e,a.b,a.j,a.d,c.k,c.m,a.u,a.r,a.n,a.t,a.o,c.l,a.q],pipes:[c.d,c.e],styles:[""]}),t})();var it=i("mrSG");function ct(t,e){if(1&t){const t=s.Zb();s.Yb(0,"button",43),s.fc("click",(function(){s.zc(t);const e=s.jc(),i=e.$implicit,c=e.index;return s.jc(2).accept(i,c)})),s.Tb(1,"i",44),s.Xb()}}function nt(t,e){if(1&t){const t=s.Zb();s.Yb(0,"button",45),s.fc("click",(function(){s.zc(t);const e=s.jc().$implicit;return s.jc(2).editItem(e)})),s.Tb(1,"i",46),s.Xb()}}function st(t,e){if(1&t){const t=s.Zb();s.Yb(0,"button",47),s.fc("click",(function(){s.zc(t);const e=s.jc().$implicit;return s.jc(2).changeStatus(e)})),s.Tb(1,"i",48),s.Xb()}}function ot(t,e){if(1&t){const t=s.Zb();s.Yb(0,"tr"),s.Yb(1,"td"),s.Jc(2),s.Xb(),s.Yb(3,"td"),s.Jc(4),s.Xb(),s.Yb(5,"td"),s.Jc(6),s.Xb(),s.Yb(7,"td"),s.Jc(8),s.kc(9,"date"),s.Xb(),s.Yb(10,"td"),s.Jc(11),s.Xb(),s.Yb(12,"td"),s.Hc(13,ct,2,0,"button",38),s.Hc(14,nt,2,0,"button",39),s.Yb(15,"button",40),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(2).download(i)})),s.Tb(16,"i",41),s.Xb(),s.Hc(17,st,2,0,"button",42),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit,i=s.jc(2);s.Hb(2),s.Kc(t.vehicleId.label),s.Hb(2),s.Kc(t.vehicleId.type),s.Hb(2),s.Kc(t.driverId.fullName||t.driverId.displayName),s.Hb(2),s.Kc(s.mc(9,8,t.dateGo,"dd/MM/yyyy")),s.Hb(3),s.Kc(t.todo),s.Hb(2),s.pc("ngIf",1!==t.orderStatus),s.Hb(1),s.pc("ngIf",1!==t.orderStatus),s.Hb(3),s.pc("ngIf",i.admin)}}function rt(t,e){if(1&t){const t=s.Zb();s.Yb(0,"table",33),s.Yb(1,"thead",34),s.Yb(2,"tr"),s.Yb(3,"th"),s.Jc(4,"Bi\u1ec3n s\u1ed1"),s.Xb(),s.Yb(5,"th"),s.Jc(6,"Lo\u1ea1i xe"),s.Xb(),s.Yb(7,"th"),s.Jc(8,"T\xe0i x\u1ebf"),s.Xb(),s.Yb(9,"th"),s.Jc(10,"Ng\xe0y \u0111i"),s.Xb(),s.Yb(11,"th"),s.Jc(12,"C\xf4ng t\xe1c"),s.Xb(),s.Yb(13,"th",35),s.Yb(14,"i",36),s.fc("click",(function(){return s.zc(t),s.jc().ngOnInit()})),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(15,"tbody"),s.Hc(16,ot,18,11,"tr",37),s.Xb(),s.Xb()}if(2&t){const t=s.jc();s.Hb(16),s.pc("ngForOf",t.dbList)}}function bt(t,e){if(1&t&&(s.Yb(0,"span",49),s.Jc(1),s.Xb()),2&t){const t=s.jc();s.Hb(1),s.Kc(t.vehicleSelected.label)}}function at(t,e){1&t&&s.Tb(0,"input",50)}function lt(t,e){if(1&t){const t=s.Zb();s.Yb(0,"tr"),s.Yb(1,"td"),s.Jc(2),s.Xb(),s.Yb(3,"td"),s.Jc(4),s.Xb(),s.Yb(5,"td"),s.Yb(6,"button",31),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(2).selectVehicle(i)})),s.Jc(7,"Ch\u1ecdn"),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit;s.Hb(2),s.Kc(t.type),s.Hb(2),s.Kc(t.label)}}function ht(t,e){if(1&t&&(s.Yb(0,"table",33),s.Yb(1,"thead",51),s.Yb(2,"tr"),s.Yb(3,"th"),s.Jc(4,"Lo\u1ea1i xe"),s.Xb(),s.Yb(5,"th"),s.Jc(6,"Bi\u1ec3n s\u1ed1"),s.Xb(),s.Tb(7,"th"),s.Xb(),s.Xb(),s.Yb(8,"tbody"),s.Hc(9,lt,8,2,"tr",37),s.Xb(),s.Xb()),2&t){const t=s.jc();s.Hb(9),s.pc("ngForOf",t.vehicleList)}}function dt(t,e){if(1&t&&(s.Yb(0,"span",49),s.Jc(1),s.Xb()),2&t){const t=s.jc();s.Hb(1),s.Kc(t.userSelected.user_Id.fullName)}}function ut(t,e){1&t&&s.Tb(0,"input",52)}function pt(t,e){if(1&t){const t=s.Zb();s.Yb(0,"tr"),s.Yb(1,"td"),s.Jc(2),s.Xb(),s.Yb(3,"td"),s.Jc(4),s.Xb(),s.Yb(5,"td"),s.Yb(6,"button",31),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc(2).selectDriver(i)})),s.Jc(7,"Ch\u1ecdn"),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit;s.Hb(2),s.Kc(t.user_Id.fullName||"Ch\u01b0a khai b\xe1o"),s.Hb(2),s.Kc(t.level)}}function mt(t,e){if(1&t&&(s.Yb(0,"table",33),s.Yb(1,"thead",51),s.Yb(2,"tr"),s.Yb(3,"th"),s.Jc(4,"H\u1ecd v\xe0 t\xean"),s.Xb(),s.Yb(5,"th"),s.Jc(6,"H\u1ea1ng b\u1eb1ng l\xe1i"),s.Xb(),s.Tb(7,"th"),s.Xb(),s.Xb(),s.Yb(8,"tbody"),s.Hc(9,pt,8,2,"tr",37),s.Xb(),s.Xb()),2&t){const t=s.jc();s.Hb(9),s.pc("ngForOf",t.userList)}}const ft=function(t){return{loading:t}},gt=[{path:"",component:F},{path:"quanlyxe",component:F},{path:"quanlydangkyxe",component:K},{path:"dangkyxe",component:M},{path:"dangkyxe/token/:token",component:$},{path:"quyettoan",component:X},{path:"hansudung/:id",component:et},{path:"hansudung",component:et},{path:"duyetxe",component:(()=>{class t{constructor(t,e){this.plus=t,this.fb=e,this.api="accept/",this.loading=!0,this.dbList=[],this.userList=[],this.vehicleList=[],this.userSelected=null,this.vehicleSelected=null,this.orderSelected=null,this.admin=this.plus.isAdmin(),this.from=localStorage.getItem("usrInfo"),this.main=this.fb.group({_id:[],vehicleId:[,[a.s.required]],driverId:[,[a.s.required]],how:[,[a.s.required]],todo:[,[a.s.required]],timeGo:[,[]],dateGo:[,[a.s.required]],timeBack:[,[]],dayBack:[,[a.s.required]],pointGo:[,[a.s.required]],pointDes:[,[a.s.required]],contact:[,[]],note:["",a.s.maxLength(100)]}),this.searchForm=this.fb.group({what:["",[a.s.minLength(4),a.s.maxLength(100)]]}),this.searchUser=this.fb.group({what:["",[a.s.minLength(4),a.s.maxLength(100)]]}),this.searchVehicle=this.fb.group({what:["",[a.s.minLength(4),a.s.maxLength(100)]]})}ngOnInit(){this.get(),this.findUser(),this.findVehicle(),this.findOrder()}get(){this.plus.httpGet(this.api+"1").subscribe(t=>{this.dbList=t,this.plus.alertToasrt(t),this.loading=!1})}findOrder(){this.searchForm.valid&&this.searchForm.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{console.log(t),t.what&&t.what.length>3&&(this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost("accept/find",t).subscribe(t=>{this.loading=!1,this.plus.alertToasrt(t),t.length>0&&(this.dbList=t)}))})}findVehicle(){this.searchVehicle.valid&&this.searchVehicle.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{console.log(t),t.what&&t.what.length>3&&(this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost("vehicle/find",t).subscribe(t=>{this.loading=!1,this.plus.alertToasrt(t),t.length>0&&(this.vehicleList=t)}))})}findUser(){this.searchUser.valid&&this.searchUser.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{console.log(t),t.what&&t.what.length>3&&(t.what=this.plus.removeAccents(t.what),this.loading=!0,this.plus.httpPost("driver/find",t).subscribe(t=>{this.loading=!1,this.plus.alertToasrt(t),this.userList=t}))})}selectDriver(t){this.userSelected=t,this.userList=[],console.log(t),this.main.controls.driverId.setValue(t.user_Id._id)}selectVehicle(t){this.vehicleSelected=t,this.vehicleList=[],console.log(t),this.main.controls.vehicleId.setValue(t._id)}changeStatus(t){this.plus.httpPut("order",{_id:t._id,orderStatus:0}).subscribe(t=>{this.plus.alertToasrt(t)})}editItem(t){console.log(t),this.orderSelected=t,this.main.patchValue(t),this.main.controls.vehicleId.setValue(t.vehicleId._id),this.main.controls.driverId.setValue(t.driverId._id),this.plus.clickBtn("openModal")}reset(){this.plus.clickBtn("closeModal"),this.main.reset(),this.searchForm.reset(),this.searchUser.reset(),this.searchVehicle.reset(),this.orderSelected=null,this.userSelected=null,this.vehicleSelected=null}submit(){const t=this.plus.addKeyWord(this.main.value);console.log(t),this.plus.httpPut("order",t).subscribe(t=>{this.plus.alertToasrt(t),this.plus.clickBtn("closeModal")})}accept(t,e){console.log(t);const i={title:`Th\xf4ng b\xe1o c\xf4ng t\xe1c ng\xe0y ${this.plus.dateToDMY(t.dateGo)}.`,email:t.driverId.email,message:`<h4>Th\xf4ng b\xe1o c\xf4ng t\xe1c ng\xe0y ${this.plus.dateToDMY(t.dateGo)}:</h4>\n      <h4>Lo\u1ea1i xe: ${t.vehicleId.type} - ${t.vehicleId.label}.</h4>\n      <h4>Gi\u1edd \u0111i: ${t.timeGo}.</h4>\n      <h4>C\xf4ng t\xe1c: ${t.todo}.</h4>\n      <h4>\u0110\u1ecba \u0111i\u1ec3m: ${t.pointDes}.</h4>\n      <h4>Li\xean h\u1ec7: ${t.contact.join(", ")}.</h4>\n      `,t0k3n:{user:"tckt.dlxl@gmail.com",pass:"pdhorsgfplhxhecj"}};1===t.orderStatus?(this.plus.alertToasrt({war:"B\u1ea1n \u0111\xe3 duy\u1ec7t xe n\xe0y!"}),this.get()):(this.plus.httpPost(this.api,{id:t._id,orderStatus:1}).subscribe(t=>{this.dbList[e].orderStatus=1,this.plus.alertToasrt(t)}),console.log(i),this.plus.sendMail(i).subscribe(e=>Object(it.__awaiter)(this,void 0,void 0,(function*(){e.email&&(this.plus.alertToasrt({msg:"\u0110\xe3 g\u1eedi mail cho l\xe1i xe"}),yield this.plus.sleep(5e3),i.email=t.userId.email,this.plus.sendMail(i).subscribe(t=>{this.plus.alertToasrt({msg:"\u0110\xe3 g\u1eedi mail cho ng\u01b0\u1eddi \u0111\u0103ng k\xfd xe"})}))}))))}download(t){JSON.parse(localStorage.getItem("usrInfo")).unit||this.plus.alertToasrt({err:"B\u1ea1n c\u1ea7n khai b\xe1o th\xeam th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"}),console.log(t);const e=Object.assign({},t);e.dateGo=this.plus.dateToDMY(e.dateGo),e.dayBack=this.plus.dateToDMY(e.dayBack)}}return t.\u0275fac=function(e){return new(e||t)(s.Sb(n.a),s.Sb(a.c))},t.\u0275cmp=s.Mb({type:t,selectors:[["app-acception"]],decls:66,vars:14,consts:[[1,"form-group",3,"formGroup"],["type","text","placeholder","Nh\u1eadp th\xf4ng tin b\u1ea1n c\u1ea7n t\xecm","formControlName","what",1,"form-control",3,"ngClass","change"],["class","table table-hover",4,"ngIf"],["type","button","id","openModal","hidden","","data-toggle","modal","data-target","#regModal",1,"btn","btn-primary","btn-lg"],["id","regModal","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-primary"],[1,"modal-title","text-center","text-white"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[3,"formGroup"],[1,"form-group"],["class","text-danger",4,"ngIf"],["type","text","class","form-control","placeholder","Nh\u1eadp th\xf4ng tin xe c\u1ea7n \u0111\u1ed5i","formControlName","what",4,"ngIf"],[1,"vehicleList"],["type","text","class","form-control","placeholder","Nh\u1eadp th\xf4ng tin t\xe0i x\u1ebf c\u1ea7n \u0111\u1ed5i","formControlName","what",4,"ngIf"],[1,"userList"],["type","text","hidden","","formControlName","_id",1,"form-control"],[1,"row","form-group"],[1,"col-sm-4"],[1,"col-sm-8"],["type","number","formControlName","how",1,"form-control"],["rows","2","formControlName","todo",1,"form-control"],["type","text","formControlName","timeGo",1,"form-control"],["rows","3","formControlName","note",1,"form-control"],[1,"modal-footer"],["type","button","id","closeModal","data-dismiss","modal",1,"btn","btn-outline-danger",3,"click"],[1,"fa","fa-times"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-floppy-o"],[1,"table","table-hover"],[1,"thead-default"],[1,"text-center","text-primary"],[1,"fa","fa-refresh",3,"click"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-warning mx-1","title","Duy\u1ec7t",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-success mx-1",3,"click",4,"ngIf"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-outline-primary","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-print","text-info"],["type","button","class","btn btn-outline-danger mx-1",3,"click",4,"ngIf"],["type","button","title","Duy\u1ec7t",1,"btn","btn-outline-warning","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-check"],["type","button",1,"btn","btn-outline-success","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],["type","button",1,"btn","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash","text-danger"],[1,"text-danger"],["type","text","placeholder","Nh\u1eadp th\xf4ng tin xe c\u1ea7n \u0111\u1ed5i","formControlName","what",1,"form-control"],[1,"thead-inverse"],["type","text","placeholder","Nh\u1eadp th\xf4ng tin t\xe0i x\u1ebf c\u1ea7n \u0111\u1ed5i","formControlName","what",1,"form-control"]],template:function(t,e){1&t&&(s.Yb(0,"form",0),s.Yb(1,"input",1),s.fc("change",(function(){return e.findOrder()})),s.Xb(),s.Xb(),s.Hc(2,rt,17,1,"table",2),s.Tb(3,"button",3),s.Yb(4,"div",4),s.Yb(5,"div",5),s.Yb(6,"div",6),s.Yb(7,"div",7),s.Yb(8,"h5",8),s.Jc(9,"Hi\u1ec7u ch\u1ec9nh xe \u0111\u0103ng k\xfd"),s.Xb(),s.Yb(10,"button",9),s.fc("click",(function(){return e.reset()})),s.Yb(11,"span",10),s.Jc(12,"\xd7"),s.Xb(),s.Xb(),s.Xb(),s.Yb(13,"div",11),s.Yb(14,"div",12),s.Yb(15,"form",13),s.Yb(16,"div",14),s.Yb(17,"h6"),s.Jc(18,"\u0110\u1ed5i xe: "),s.Hc(19,bt,2,1,"span",15),s.Xb(),s.Hc(20,at,1,0,"input",16),s.Xb(),s.Yb(21,"div",17),s.Hc(22,ht,10,1,"table",2),s.Xb(),s.Xb(),s.Yb(23,"form",13),s.Yb(24,"div",14),s.Yb(25,"h6"),s.Jc(26,"\u0110\u1ed5i t\xe0i x\u1ebf: "),s.Hc(27,dt,2,1,"span",15),s.Xb(),s.Hc(28,ut,1,0,"input",18),s.Xb(),s.Yb(29,"div",19),s.Hc(30,mt,10,1,"table",2),s.Xb(),s.Xb(),s.Yb(31,"form",13),s.Tb(32,"input",20),s.Yb(33,"div",21),s.Yb(34,"div",22),s.Yb(35,"h6"),s.Jc(36,"S\u1ed1 ng\u01b0\u1eddi \u0111i:"),s.Xb(),s.Xb(),s.Yb(37,"div",23),s.Tb(38,"input",24),s.Xb(),s.Xb(),s.Tb(39,"hr"),s.Yb(40,"div",21),s.Yb(41,"div",22),s.Yb(42,"h6"),s.Jc(43,"C\xf4ng t\xe1c:"),s.Xb(),s.Xb(),s.Yb(44,"div",23),s.Tb(45,"textarea",25),s.Xb(),s.Xb(),s.Tb(46,"hr"),s.Yb(47,"div",21),s.Yb(48,"div",22),s.Yb(49,"h6"),s.Jc(50,"Gi\u1edd \u0111i:"),s.Xb(),s.Xb(),s.Yb(51,"div",23),s.Tb(52,"input",26),s.Xb(),s.Xb(),s.Tb(53,"hr"),s.Yb(54,"div",21),s.Yb(55,"div",22),s.Yb(56,"h6"),s.Jc(57,"L\u1eddi nh\u1eafn cho l\xe1i xe"),s.Xb(),s.Xb(),s.Yb(58,"div",23),s.Tb(59,"textarea",27),s.Xb(),s.Xb(),s.Tb(60,"hr"),s.Xb(),s.Xb(),s.Xb(),s.Yb(61,"div",28),s.Yb(62,"button",29),s.fc("click",(function(){return e.reset()})),s.Tb(63,"i",30),s.Xb(),s.Yb(64,"button",31),s.fc("click",(function(){return e.submit()})),s.Tb(65,"i",32),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&t&&(s.pc("formGroup",e.searchForm),s.Hb(1),s.pc("ngClass",s.uc(12,ft,e.loading)),s.Hb(1),s.pc("ngIf",e.dbList.length>0),s.Hb(13),s.pc("formGroup",e.searchVehicle),s.Hb(4),s.pc("ngIf",e.vehicleSelected),s.Hb(1),s.pc("ngIf",!e.vehicleSelected),s.Hb(2),s.pc("ngIf",e.vehicleList.length>0),s.Hb(1),s.pc("formGroup",e.searchUser),s.Hb(4),s.pc("ngIf",e.userSelected),s.Hb(1),s.pc("ngIf",!e.userSelected),s.Hb(2),s.pc("ngIf",e.userList.length>0),s.Hb(1),s.pc("formGroup",e.main))},directives:[a.u,a.k,a.e,a.b,a.j,a.d,c.k,c.m,a.o,c.l],pipes:[c.d],styles:[""]}),t})()},{path:"taixe",component:K}];let Yt=(()=>{class t{}return t.\u0275mod=s.Qb({type:t}),t.\u0275inj=s.Pb({factory:function(e){return new(e||t)},imports:[[y.e.forChild(gt)],y.e]}),t})(),vt=(()=>{class t{}return t.\u0275mod=s.Qb({type:t}),t.\u0275inj=s.Pb({factory:function(e){return new(e||t)},imports:[[c.b,Yt,a.p,a.f]]}),t})()}}]);