function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{IrIT:function(t,e,n){"use strict";n.r(e),n.d(e,"EmailModule",(function(){return U}));var a=n("s7LF"),i=n("SVse"),r=n("mrSG"),o=n("IheW"),s=n("COeT"),c=n("KZYO"),l=n("GS7A"),u=function(){function t(e,n,a,i){_classCallCheck(this,t),this.loader=e,this.url=n,this.http=a,this.plus=i}return _createClass(t,[{key:"uploadFile",value:function(t,e,n){var a=new FormData,i=new o.d({"ngsw-bypass":""});return a.append("file",t),console.log("formData",a),new o.e,this.http.post("https://dienluc.herokuapp.com/api/upload",a,{headers:i})}},{key:"upload",value:function(){var t=this;return new Promise((function(e,n){t.loader.file.then((function(a){t.uploadFile(a,t.url,"test").subscribe((function(t){console.log(t),e({default:t.url})}),(function(t){n("Ch\u1ee9c n\u0103ng b\u1ecb l\u1ed7i.\nVui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat!"),console.log(a)}))}))}))}},{key:"abort",value:function(){console.log("abort")}}]),t}(),b=n("EUZL"),h=n("8Y7J"),d=n("iInd"),g=n("PjcS"),p=["myEditor"];function f(t,e){if(1&t&&(h.Yb(0,"div",19),h.Yb(1,"div",20),h.Jc(2),h.Xb(),h.Xb()),2&t){var n=h.jc();h.Hb(1),h.Fc("width",n.uploadProgress+"%"),h.Hb(1),h.Lc("",n.uploadProgress,"%")}}function m(t,e){if(1&t){var n=h.Zb();h.Yb(0,"div",21),h.Yb(1,"div",22),h.Yb(2,"span",23),h.Jc(3,"\u0110\u01b0\u1eddng d\u1eabn file t\u1ea3i l\xean:"),h.Xb(),h.Xb(),h.Tb(4,"input",24,25),h.Yb(6,"div",26),h.Yb(7,"button",27),h.fc("click",(function(){h.zc(n);var t=h.yc(5);return h.jc().copyInputMessage(t)})),h.Tb(8,"i",28),h.Xb(),h.Xb(),h.Xb()}if(2&t){var a=h.jc();h.Hb(4),h.qc("value",a.linkUpload)}}function v(t,e){if(1&t&&(h.Yb(0,"tr"),h.Yb(1,"td"),h.Jc(2),h.Xb(),h.Yb(3,"td"),h.Jc(4),h.Xb(),h.Yb(5,"td"),h.Jc(6),h.Xb(),h.Xb()),2&t){var n=e.$implicit;h.Hb(2),h.Lc(" ",n.receiver," "),h.Hb(2),h.Lc(" ",n.email," "),h.Hb(2),h.Lc(" ",n.err," ")}}function y(t,e){if(1&t&&(h.Yb(0,"div"),h.Yb(1,"h4",29),h.Jc(2,"DANH S\xc1CH D\u1eee LI\u1ec6U KH\xd4NG H\u1ee2P L\u1ec6"),h.Xb(),h.Yb(3,"table",30),h.Yb(4,"tr",31),h.Yb(5,"th"),h.Jc(6,"Kh\xe1ch h\xe0ng "),h.Xb(),h.Yb(7,"th"),h.Jc(8," Email "),h.Xb(),h.Yb(9,"th"),h.Jc(10," N\u1ed9i dung l\u1ed7i "),h.Xb(),h.Xb(),h.Hc(11,v,7,3,"tr",32),h.Xb(),h.Xb()),2&t){var n=h.jc();h.Hb(11),h.pc("ngForOf",n.errData)}}function k(t,e){1&t&&(h.Yb(0,"label",33),h.Tb(1,"i",34),h.Jc(2,"Danh s\xe1ch g\u1eedi email "),h.Xb())}function J(t,e){if(1&t){var n=h.Zb();h.Yb(0,"button",35),h.fc("click",(function(){return h.zc(n),h.jc().checkImportData()})),h.Jc(1,"Ki\u1ec3m tra "),h.Xb()}}function X(t,e){if(1&t){var n=h.Zb();h.Yb(0,"button",35),h.fc("click",(function(){return h.zc(n),h.jc().reload()})),h.Jc(1,"L\xe0m l\u1ea1i "),h.Xb()}}var H=function(t,e){return{"bg-success":t,"bg-danger":e}};function I(t,e){if(1&t&&(h.Yb(0,"tr"),h.Yb(1,"td"),h.Jc(2),h.Xb(),h.Yb(3,"td",40),h.Jc(4),h.Xb(),h.Yb(5,"td",40),h.Jc(6),h.Xb(),h.Yb(7,"td",41),h.Jc(8),h.Xb(),h.Xb()),2&t){var n=e.$implicit,a=e.index;h.pc("@shrinkOut","in"),h.Hb(2),h.Kc(a+1),h.Hb(2),h.Kc(n.receiver),h.Hb(2),h.Kc(n.email),h.Hb(1),h.pc("ngClass",h.vc(6,H,n.status,3===n.status)),h.Hb(1),h.Lc(" ",1===n.status?"\u0110\xe3 g\u1eedi":"Ch\u01b0a g\u1eedi","")}}function Y(t,e){if(1&t){var n=h.Zb();h.Yb(0,"button",42),h.fc("click",(function(){return h.zc(n),h.jc(2).sendMail()})),h.Jc(1,"G\u1eedi mail"),h.Xb()}}function x(t,e){if(1&t&&(h.Yb(0,"div",36),h.Yb(1,"h5"),h.Jc(2,"DANH S\xc1CH EMAIL \u0110\u01af\u1ee2C TH\xd4NG B\xc1O"),h.Xb(),h.Yb(3,"table",37),h.Yb(4,"thead"),h.Yb(5,"tr"),h.Yb(6,"th"),h.Jc(7,"STT"),h.Xb(),h.Yb(8,"th"),h.Jc(9,"Ng\u01b0\u1eddi nh\u1eadn"),h.Xb(),h.Yb(10,"th"),h.Jc(11,"Email"),h.Xb(),h.Yb(12,"th",38),h.Jc(13,"Tr\u1ea1ng th\xe1i"),h.Xb(),h.Xb(),h.Xb(),h.Yb(14,"tbody"),h.Hc(15,I,9,9,"tr",32),h.Xb(),h.Xb(),h.Hc(16,Y,2,0,"button",39),h.Xb()),2&t){var n=h.jc();h.Hb(15),h.pc("ngForOf",n.dataJson),h.Hb(1),h.pc("ngIf",0===n.errData.length&&n.dataJson.length>0)}}function w(t,e){if(1&t){var n=h.Zb();h.Yb(0,"button",50),h.fc("click",(function(){return h.zc(n),h.jc(2).pre()})),h.Tb(1,"i",51),h.Xb()}}function T(t,e){if(1&t){var n=h.Zb();h.Yb(0,"button",52),h.fc("click",(function(){return h.zc(n),h.jc(2).next()})),h.Tb(1,"i",53),h.Xb()}}function C(t,e){if(1&t&&h.Tb(0,"div",54),2&t){var n=h.jc(2);h.pc("innerHTML",n.dataJson[n.i].message,h.Ac)}}function D(t,e){if(1&t&&(h.Yb(0,"div",43),h.Yb(1,"div",44),h.Hc(2,w,2,0,"button",45),h.Hc(3,T,2,0,"button",46),h.Xb(),h.Yb(4,"div",47),h.Yb(5,"h5",48),h.Jc(6),h.Xb(),h.Hc(7,C,1,1,"div",49),h.Xb(),h.Tb(8,"hr"),h.Xb()),2&t){var n=h.jc();h.Hb(2),h.pc("ngIf",n.i>0&&n.dataJson.length>n.i),h.Hb(1),h.pc("ngIf",n.dataJson.length-1>n.i),h.Hb(3),h.Lc("N\u1ed9i dung \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn email ",n.dataJson[n.i].email," "),h.Hb(1),h.pc("ngIf",n.dataJson[n.i].message)}}var L,S=((L=function(){function t(e,n,i,r){_classCallCheck(this,t),this.plus=e,this.fb=n,this.httpClient=i,this.router=r,this.Editor=c,this.apibox="box/",this.apiUpload="https://dienluc.herokuapp.com/api/upload",this.collection="notify",this.db=null,this.dbName="email",this.dbVer=1,this.selectedFile=null,this.dataImport=[],this.dataJson=[],this.errData=[],this.sent=[],this.resent=[],this.send="",this.htmlContent=sessionStorage.getItem("htmlContent")||"Xin ch\xe0o!",this.uploadProgress=0,this.i=0,this.main=this.fb.group({email:[,a.s.email],title:["Th\xf4ng b\xe1o ",[a.s.minLength(3)]],message:["\u0110i\u1ec7n l\u1ef1c xin th\xf4ng b\xe1o nh\u01b0 sau:",a.s.minLength(3)]}),this.account=this.fb.group({user:["",a.s.minLength(3)],pass:["",a.s.minLength(6)]}),this.checkBody=this.fb.group({from:["",[a.s.required,a.s.minLength(10)]],status:0,err:"",email:[,a.s.email],receiver:["",[a.s.required,a.s.minLength(3)]],title:["",[a.s.required,a.s.minLength(3)]],message:["",[a.s.required,a.s.minLength(3)]]}),this.uploadForm=this.fb.group({profile:[""]})}return _createClass(t,[{key:"ngOnInit",value:function(){this.reset(),console.log(this.resent),this.init(),this.plus.httpGetFull(this.apiUpload).subscribe((function(t){console.log(t)}))}},{key:"onReady",value:function(t){var e=this;t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement()),t.plugins.get("FileRepository").createUploadAdapter=function(t){return console.log(btoa(t.file)),new u(t,"/upload",e.httpClient,e.plus)}}},{key:"saveArticle",value:function(){this.dataJson.length>0&&(this.plus.alertToasrt({war:"B\u1ea1n c\u1ea7n ch\u1ecdn l\u1ea1i danh s\xe1ch nh\u1eadn email sau khi hi\u1ec7u ch\u1ec9nh n\u1ed9i dung!"}),this.reset()),this.htmlContent=this.getArticleContent(),sessionStorage.setItem("htmlContent",this.htmlContent)}},{key:"getArticleContent",value:function(){return this.myEditor&&this.myEditor.editorInstance?this.myEditor.editorInstance.getData():""}},{key:"init",value:function(){var t=this;this.from=this.plus.user.getValue().usrInfo.unit,this.plus.IDB_DB_GetAll(this.db,this.collection).subscribe((function(e){console.log(e),e.filter((function(e){0==e.status&&(console.log(e),t.resent.push(e))})),t.resent.length>0?(console.log(t.resent),confirm("B\u1ea5m OK \u0111\u1ec3 g\u1eedi mail tr\u01b0\u1edbc ch\u01b0a ho\xe0n th\xe0nh.\nB\u1ea5m Cancel \u0111\u1ec3 x\xf3a phi\xean l\xe0m vi\u1ec7c tr\u01b0\u1edbc?")?t.dataJson=t.resent:t.plus.IDB_DB_ClearCollection(t.db,t.collection).subscribe((function(t){t&&console.log("clear")}))):t.plus.IDB_DB_ClearCollection(t.db,t.collection).subscribe((function(t){t&&console.log("clear")}))})),0===this.from.length&&(this.plus.alertToasrt({err:"B\u1ea1n ch\u01b0a khai b\xe1o \u0111\u01a1n v\u1ecb t\u1ea1i m\u1ee5c T\xe0i Kho\u1ea3n"}),this.router.navigateByUrl("/taikhoan"))}},{key:"getFails",value:function(){}},{key:"readXlsx",value:function(t){var e=this;this.dataJson=[],this.dataImport=[];var n=t.target,a=new FileReader;a.onload=function(t){var n=b.read(t.target.result,{type:"binary"});e.dataImport=b.utils.sheet_to_json(n.Sheets[n.SheetNames[0]],{header:1})},a.readAsBinaryString(n.files[0]),n=null}},{key:"reload",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate([""]);case 2:return t.abrupt("return",this.router.navigate(["email/thongbao"]));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"checkImportData",value:function(){var t=this;this.dataImport.length>200&&(this.reset(),this.plus.alertToasrt({err:"S\u1ed1 l\u01b0\u1ee3ng email v\u01b0\u1ee3t qu\xe1 gi\u1edbi h\u1ea1n\nVui l\xf2ng ch\u1ecdn d\u01b0\u1edbi 200 email cho m\u1ed7i l\u1ea7n g\u1eedi!"})),this.dataJson=[];var e=this.dataImport[0];this.dataImport.splice(0,1),this.dataImport.forEach((function(n){var a="";if("x"==n[1]){for(var i=5;i<6;i++)a+="".concat(e[i]," : ").concat(t.plus.numberWithCommas(n[i])),n[i];var r={from:t.from,status:0,err:"",receiver:n[3],email:n[4],title:""+t.main.get("title").value,message:"&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; K\xednh g\u1eedi ".concat(n[2],": ").concat(n[3],"\n\n                      ").concat(t.htmlContent,"  \n ").concat(a,' \n <br>\n                      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tr\xe2n tr\u1ecdng.\n                      <hr>\n                      <table class="table">\n                      <td><img src="https://dienluc.tk/assets/file/NhanHieuDLuc-Doc-150x150.jpg"> </td>\n                      <td>\n                        <b>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c - C\xf4ng ty TNHH m\u1ed9t th\xe0nh vi\xean \u0110i\u1ec7n l\u1ef1c \u0110\u1ed3ng Nai.</b><br>\n                        <b>\u0110\u1ecba ch\u1ec9: S\u1ed1 94 H\xf9ng V\u01b0\u01a1ng - Th\u1ecb tr\u1ea5n Gia Ray - Huy\u1ec7n Xu\xe2n L\u1ed9c - T\u1ec9nh \u0110\u1ed3ng Nai.</b><br>\n                        <b>MST: 3600432744 - 004</b><br>\n                        <b>Li\xean h\u1ec7: <a href="tel:02512218242" title="02512218242">0251.2218.242 </a></b><br>\n                        <b>T\u1ed5ng \u0111\xe0i ch\u0103m s\xf3c kh\xe1ch h\xe0ng: <a href="tel:19001006">19001006</a> - <a href="tel:19009000">19009000</a></b><br>\n                      </td>\n                      </table>\n                      ')};if(t.checkBody.patchValue(r),t.checkBody.valid)t.dataJson.push(r),r._id=r.email,console.log(r),t.plus.IDB_DB_Add(t.db,t.collection,r);else{if(t.checkBody.valid)return void console.log("ret");console.log("else if");var o=t.plus.getErrValidateForm(t.checkBody);console.log(o),r.err=o,t.errData.push(r)}if(t.errData.length>0)return console.log(t.errData),t.plus.IDB_DB_ClearCollection(t.db,t.collection).subscribe((function(e){e&&t.plus.alertWarning("D\u1eef li\u1ec7u c\xf3 l\u1ed7i!")}));t.plus.loaded()}}))}},{key:"sendMail",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=confirm("Th\u1ef1c hi\u1ec7n th\xf4ng b\xe1o cho "+this.dataJson.length+" CBCNV?"),!(0===this.errData.length&&this.dataJson.length>0&&e)){t.next=5;break}return t.delegateYield(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0,a=n.dataJson.length,i=regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.plus.sleep(5e3);case 2:n.i=e,a=n.dataJson[e],n.plus.sendMail(a).subscribe((function(t){console.log(),t.email&&(n.dataJson.filter((function(e,a){e.email===t.email&&(n.dataJson[a].status=1,n.plus.IDB_DB_DeleteOne(n.db,n.collection,e.email))})),console.log(e,t.email,a.reciver),localStorage.setItem("notify",JSON.stringify(n.dataJson)))}),(function(t){n.dataJson[e].status=0,localStorage.setItem("notify",JSON.stringify(n.dataJson)),n.plus.alertToasrt({err:" Ch\u01b0a g\u1eedi email \u0111\u1ebfn "+a.reciver})})),e++;case 5:case"end":return t.stop()}}),t)}));case 3:if(!(e<a)){t.next=7;break}return t.delegateYield(i(),"t0",5);case 5:t.next=3;break;case 7:case"end":return t.stop()}}),t)}))(),"t0",3);case 3:t.next=6;break;case 5:this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y thao t\xe1c!"}),window.location.reload();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"uploadDrive",value:function(t){var e=this;this.plus.load(),console.log(t.target.files[0]);var n=t.target.files[0].size;if(console.log(n),n>52428800)return this.plus.alertToasrt({war:"Dung l\u01b0\u1ee3ng file qu\xe1 50Mb"}),void this.plus.loaded();var a=new FormData;a.append("file",t.target.files[0]);var i=new o.d({"ngsw-bypass":""});this.httpClient.post(this.apiUpload,a,{reportProgress:!0,observe:"events",headers:i}).subscribe((function(t){t.type===o.c.UploadProgress?e.uploadProgress=Math.round(t.loaded/t.total*100):t.type===o.c.Response&&(e.linkUpload=t.body.url,e.plus.pushLocalStorage("link",t.body.url),e.plus.loaded())}),(function(t){e.plus.loaded(),e.plus.alertToasrt({err:"L\u1ed7i upload file! \nVui l\xf2ng th\u1eed l\u1ea1i!"})}))}},{key:"copyInputMessage",value:function(t){this.plus.copyInputMessage(t)}},{key:"getBase64",value:function(t){var e=new FileReader;return e.readAsDataURL(t),e.onload=function(){},e.onerror=function(t){console.log("Error: ",t)},e.result}},{key:"pre",value:function(){this.i>0?this.i--:this.i=0}},{key:"next",value:function(){this.i<this.dataJson.length-1?this.i++:this.i=0}},{key:"reset",value:function(){this.dataJson=[],this.errData=[],this.linkUpload="",this.uploadProgress=0}},{key:"logList",value:function(t){this.dataJson.splice(0,1),localStorage.setItem("sendmail",this.dataJson.toString())}},{key:"sliceList",value:function(t){}},{key:"export",value:function(t){this.plus.exportHTML(t)}}]),t}()).\u0275fac=function(t){return new(t||L)(h.Sb(s.a),h.Sb(a.c),h.Sb(o.a),h.Sb(d.b))},L.\u0275cmp=h.Mb({type:L,selectors:[["app-notify"]],viewQuery:function(t,e){var n;1&t&&h.Oc(p,!0),2&t&&h.xc(n=h.gc())&&(e.myEditor=n.first)},decls:25,vars:11,consts:[[1,"container","my-3"],[1,"text-center","text-primary"],[1,"import"],["for","file-upload",1,"custom-file-upload","mx-5"],[1,"fa","fa-file","text-primary"],["hidden","","id","file-upload","name","filesUploaded","type","file","multiple","false",3,"change"],["class","progress",4,"ngIf"],["class","input-group mb-3",4,"ngIf"],[3,"editor","data","ready","change"],["myEditor",""],[4,"ngIf"],[1,"list"],["target","_blank","href","/assets/file/MauThongBao.xlsx",1,"badge","badge-warning"],["for","file-import","class","custom-file-upload mx-5",4,"ngIf"],["hidden","","id","file-import","type","file","multiple","false",3,"change"],["type","button","class","btn btn-outline-primary mx-3",3,"click",4,"ngIf"],["class","dataOk",4,"ngIf"],["class","card border-primary rounded",4,"ngIf"],["id","11",3,"innerHTML","click"],[1,"progress"],["role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text",1,"form-control",3,"value"],["userinput",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fa","fa-copy"],[1,"text-center","bg-warning","rounded-pill"],[1,"table","table-hover","table-invert","table-bordered","rounded-pill"],[1,"text-center","bg-danger"],[4,"ngFor","ngForOf"],["for","file-import",1,"custom-file-upload","mx-5"],[1,"fa","fa-address-book"],["type","button",1,"btn","btn-outline-primary","mx-3",3,"click"],[1,"dataOk"],[1,"table","table-hover"],[1,"text-center"],["type","button","class","btn btn-primary mx-3 text-center","data-toggle","modal","data-target","#modelId",3,"click",4,"ngIf"],["scope","row"],[1,"text-center",3,"ngClass"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-primary","mx-3","text-center",3,"click"],[1,"card","border-primary","rounded"],[1,"button"],["type","button","class","btn btn-danger float-left",3,"click",4,"ngIf"],["type","button","class","btn btn-danger float-right",3,"click",4,"ngIf"],[1,"card-body"],[1,"text-center","rounded","font-weigth-bold","bg-warning","my-4"],[3,"innerHTML",4,"ngIf"],["type","button",1,"btn","btn-danger","float-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],["type","button",1,"btn","btn-danger","float-right",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],[3,"innerHTML"]],template:function(t,e){1&t&&(h.Yb(0,"div",0),h.Yb(1,"h5",1),h.Jc(2,"G\u1eecI TH\xd4NG B\xc1O B\u1eb0NG EMAIL"),h.Xb(),h.Yb(3,"div",2),h.Yb(4,"label",3),h.Tb(5,"i",4),h.Jc(6,"File \u0111\xednh k\xe8m "),h.Xb(),h.Yb(7,"input",5),h.fc("change",(function(t){return e.uploadDrive(t)})),h.Xb(),h.Hc(8,f,3,3,"div",6),h.Hc(9,m,9,1,"div",7),h.Yb(10,"ckeditor",8,9),h.fc("ready",(function(t){return e.onReady(t)}))("change",(function(){return e.saveArticle()})),h.Xb(),h.Hc(12,y,12,1,"div",10),h.Yb(13,"div",11),h.Tb(14,"hr"),h.Yb(15,"a",12),h.Jc(16,"File m\u1eabu"),h.Xb(),h.Hc(17,k,3,0,"label",13),h.Yb(18,"input",14),h.fc("change",(function(t){return e.readXlsx(t)})),h.Xb(),h.Hc(19,J,2,0,"button",15),h.Hc(20,X,2,0,"button",15),h.Xb(),h.Hc(21,x,17,2,"div",16),h.Tb(22,"hr"),h.Xb(),h.Hc(23,D,9,4,"div",17),h.Xb(),h.Yb(24,"p",18),h.fc("click",(function(){return e.export("11")})),h.Xb()),2&t&&(h.Hb(8),h.pc("ngIf",e.uploadProgress>0&&e.uploadProgress<100),h.Hb(1),h.pc("ngIf",e.linkUpload),h.Hb(1),h.qc("data",e.htmlContent),h.pc("editor",e.Editor),h.Hb(2),h.pc("ngIf",e.errData.length>0),h.Hb(5),h.pc("ngIf",0===e.dataJson.length),h.Hb(2),h.pc("ngIf",e.dataImport.length>0&&0===e.dataJson.length&&0===e.errData.length),h.Hb(1),h.pc("ngIf",e.errData.length>0),h.Hb(1),h.pc("ngIf",e.dataJson.length>0&&0===e.errData.length),h.Hb(2),h.pc("ngIf",e.dataJson.length>0&&0===e.errData.length),h.Hb(1),h.pc("innerHTML",e.htmlContent,h.Ac))},directives:[i.m,g.a,i.l,i.k],styles:[""],data:{animation:[Object(l.j)("fadeInOut",[Object(l.g)("void",Object(l.h)({opacity:0})),Object(l.i)("void <=> *",Object(l.e)(1e3))]),Object(l.j)("shrinkOut",[Object(l.g)("in",Object(l.h)({height:"*"})),Object(l.i)("* => void",[Object(l.h)({height:"*"}),Object(l.e)(250,Object(l.h)({height:0}))])])]}}),L);function O(t,e){if(1&t){var n=h.Zb();h.Yb(0,"button",17),h.fc("click",(function(){return h.zc(n),h.jc().checkImportData()})),h.Jc(1,"Xem tr\u01b0\u1edbc"),h.Xb()}}function B(t,e){if(1&t){var n=h.Zb();h.Yb(0,"div",18),h.Yb(1,"div",19),h.Yb(2,"button",20),h.fc("click",(function(){return h.zc(n),h.jc().pre()})),h.Tb(3,"i",21),h.Xb(),h.Yb(4,"button",22),h.fc("click",(function(){return h.zc(n),h.jc().next()})),h.Tb(5,"i",23),h.Xb(),h.Xb(),h.Yb(6,"div",24),h.Yb(7,"h5",25),h.Jc(8,"N\u1ed8I DUNG EMAIL"),h.Xb(),h.Tb(9,"div",26),h.Xb(),h.Tb(10,"hr"),h.Xb()}if(2&t){var a=h.jc();h.Hb(9),h.pc("innerHTML",a.dataJson[a.i].message,h.Ac)}}function j(t,e){if(1&t&&(h.Yb(0,"tr"),h.Yb(1,"td"),h.Jc(2),h.Xb(),h.Yb(3,"td"),h.Jc(4),h.Xb(),h.Xb()),2&t){var n=e.$implicit;h.Hb(2),h.Lc(" ",n.email," "),h.Hb(2),h.Lc(" ",n.err," ")}}function N(t,e){if(1&t&&(h.Yb(0,"div",27),h.Yb(1,"h4"),h.Jc(2,"DANH S\xc1CH D\u1eee LI\u1ec6U KH\xd4NG H\u1ee2P L\u1ec6"),h.Xb(),h.Yb(3,"table",28),h.Hc(4,j,5,2,"tr",29),h.Xb(),h.Xb()),2&t){var n=h.jc();h.Hb(4),h.pc("ngForOf",n.errData)}}var M=function(t,e){return{"bg-success":t,"bg-danger":e}};function _(t,e){if(1&t&&(h.Yb(0,"tr"),h.Yb(1,"td"),h.Jc(2),h.Xb(),h.Yb(3,"td",33),h.Jc(4),h.Xb(),h.Yb(5,"td",33),h.Jc(6),h.Xb(),h.Yb(7,"td",34),h.Jc(8),h.Xb(),h.Xb()),2&t){var n=e.$implicit,a=e.index;h.Hb(2),h.Kc(a+1),h.Hb(2),h.Kc(n.fullName),h.Hb(2),h.Kc(n.email),h.Hb(1),h.pc("ngClass",h.vc(5,M,n.status,3===n.status)),h.Hb(1),h.Lc(" ",1===n.status?"\u0110\xe3 g\u1eedi":"Ch\u01b0a g\u1eedi"," ")}}function E(t,e){if(1&t&&(h.Yb(0,"div",30),h.Yb(1,"h5"),h.Jc(2,"DANH S\xc1CH EMAIL \u0110\u01af\u1ee2C TH\xd4NG B\xc1O"),h.Xb(),h.Yb(3,"table",31),h.Yb(4,"thead"),h.Yb(5,"tr"),h.Yb(6,"th"),h.Jc(7,"STT"),h.Xb(),h.Yb(8,"th"),h.Jc(9,"H\u1ecd v\xe0 t\xean"),h.Xb(),h.Yb(10,"th"),h.Jc(11,"Email"),h.Xb(),h.Yb(12,"th",32),h.Jc(13,"Tr\u1ea1ng th\xe1i"),h.Xb(),h.Xb(),h.Xb(),h.Yb(14,"tbody"),h.Hc(15,_,9,8,"tr",29),h.Xb(),h.Xb(),h.Xb()),2&t){var n=h.jc();h.Hb(15),h.pc("ngForOf",n.dataJson)}}function F(t,e){if(1&t){var n=h.Zb();h.Yb(0,"button",35),h.fc("click",(function(){return h.zc(n),h.jc().sendMail()})),h.Jc(1,"G\u1eedi mail"),h.Xb()}}var R,A,G,P,q=[{path:"",component:(A=function(){function t(e){_classCallCheck(this,t),this.plus=e,this.db=null,this.verDB=1,this.dbName="email",this.collection=["tba","mba","tubuhathe"],this.api="email"}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.plus.IDB_InitDB(this.api).subscribe((function(e){t.db=e}))}}]),t}(),A.\u0275fac=function(t){return new(t||A)(h.Sb(s.a))},A.\u0275cmp=h.Mb({type:A,selectors:[["app-email"]],decls:2,vars:0,template:function(t,e){1&t&&(h.Yb(0,"p"),h.Jc(1,"email works!"),h.Xb())},styles:[""]}),A)},{path:"thongbao",component:S},{path:"tienluong",component:(R=function(){function t(e,n){_classCallCheck(this,t),this.plus=e,this.fb=n,this.apiUrl="https://mailer.thuc.now.sh/moneyMail/",this.from="",this.user=this.plus.user,this.dataImport=[],this.dataJson=[],this.errData=[],this.resent=[],this.send="",this.i=0,this.doc="",this.main=this.fb.group({email:[,a.s.email],title:["Th\xf4ng b\xe1o ti\u1ec1n l\u01b0\u01a1ng chuy\u1ec3n kho\u1ea3n ng\xe0y "+this.plus.dateFormat(Date.now()),[a.s.required,a.s.minLength(3)]],message:["\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c xin th\xf4ng b\xe1o chi ti\u1ebft nh\u01b0 sau:",[a.s.required,a.s.minLength(3)]]}),this.checkBody=this.fb.group({email:["",[a.s.required,a.s.email]],from:["",[a.s.required,a.s.minLength(10)]],title:["",[a.s.required,a.s.minLength(3)]],message:["",[a.s.required,a.s.minLength(3)]],reciver:["",[a.s.required,a.s.minLength(3)]]})}return _createClass(t,[{key:"ngOnInit",value:function(){this.init(),console.log(this.user.getValue())}},{key:"init",value:function(){var t=this;if((JSON.parse(localStorage.getItem("moneyMail"))||[]).filter((function(e){0===e.status&&t.resent.push(e)})),0==this.from.length){var e=this.plus.user.getValue().usrInfo.unit;e?this.from=e:this.plus.alertToasrt({err:"B\u1ea1n ch\u01b0a khai b\xe1o \u0111\u01a1n v\u1ecb t\u1ea1i m\u1ee5c T\xe0i Kho\u1ea3n"}),console.log(e)}this.resent.length>0?(console.log(this.resent),confirm("B\u1ea5m OK \u0111\u1ec3 g\u1eedi mail tr\u01b0\u1edbc ch\u01b0a ho\xe0n th\xe0nh.\nB\u1ea5m Cancel \u0111\u1ec3 x\xf3a phi\xean l\xe0m vi\u1ec7c tr\u01b0\u1edbc?")?this.dataJson=this.resent:localStorage.removeItem("moneyMail"),console.log(this.resent)):localStorage.removeItem("moneyMail")}},{key:"readXlsx",value:function(t){var e=this;this.dataJson=[],this.dataImport=[];var n=t.target,a=new FileReader;a.onload=function(t){var n=b.read(t.target.result,{type:"binary"});e.dataImport=b.utils.sheet_to_json(n.Sheets[n.SheetNames[0]],{header:1})},a.readAsBinaryString(n.files[0]),n=null}},{key:"checkImportData",value:function(){var t=this,e=this.dataImport[0],n=e.length;this.dataImport.splice(0,1),this.dataImport.forEach((function(a){for(var i="<ul>",r=5;r<n;r++)a[r]?(console.log(a[r]),i+="<li><h5>".concat(e[r],": ").concat(t.plus.numberWithCommas(a[r]),".</h5></li>")):i+="";var o={from:t.from,status:0,reciver:a[3],err:"",email:a[4],fullName:a[2]+": "+a[3],title:""+t.main.get("title").value,message:"<h5>K\xednh g\u1eedi ".concat(a[2],": ").concat(a[3],"</h5><h5>")+t.main.get("message").value+"</h5> \n"+i+"</ul><h5>S\u1ed1 ti\u1ec1n th\u1ef1c l\xe3nh tr\xean s\u1ebd \u0111\u01b0\u1ee3c chuy\u1ec3n kho\u1ea3n qua t\xe0i kho\u1ea3n s\u1ed1 ".concat(a[5]," c\u1ee7a ").concat(a[2]," ").concat(a[3],'.\n\n        M\u1ecdi \xfd ki\u1ebfn th\u1eafc m\u1eafc, vui l\xf2ng li\xean h\u1ec7 ph\xf2ng Ph\xf2ng T\u1ed5ng H\u1ee3p \u0111\u1ec3 \u0111\u01b0\u1ee3c gi\u1ea3i \u0111\xe1p. \n <br>\n        Tr\xe2n tr\u1ecdng.</h5>\n        <table class="table">\n        <td><img src="https://github.com/thuctd/FileStore/raw/master/NhanHieuDLuc-Doc-150x150.jpg"> </td>\n        <td>\n          <b>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c - C\xf4ng ty TNHH m\u1ed9t th\xe0nh vi\xean \u0110i\u1ec7n l\u1ef1c \u0110\u1ed3ng Nai.</b><br>\n          <b>\u0110\u1ecba ch\u1ec9: S\u1ed1 94 H\xf9ng V\u01b0\u01a1ng - Th\u1ecb tr\u1ea5n Gia Ray - Huy\u1ec7n Xu\xe2n L\u1ed9c - T\u1ec9nh \u0110\u1ed3ng Nai.</b><br>\n          <b>MST: 3600432744 - 004</b><br>\n          <b>Li\xean h\u1ec7: <a href="tel:02512218242" title="02512218242">0251.2218.242 </a></b><br>\n          <b>T\u1ed5ng \u0111\xe0i ch\u0103m s\xf3c kh\xe1ch h\xe0ng: <a href="tel:19001006">19001006</a> - <a href="tel:19009000">19009000</a></b><br>\n        </td>\n        </table>\n        ')};if(console.log(o),t.checkBody.patchValue(o),t.checkBody.valid)t.dataJson.push(o),t.plus.pushLocalStorage("moneyMail",o);else{var s=t.plus.getErrValidateForm(t.checkBody);o.err=s,console.log(s),t.errData.push(o)}}))}},{key:"sendMail",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.dataJson.length,n=confirm("Th\u1ef1c hi\u1ec7n th\xf4ng b\xe1o cho "+e+" CBCNV?"),!(e>450)){t.next=5;break}this.plus.alertToasrt({war:"Vui l\xf2ng l\u1eadp danh s\xe1ch d\u01b0\u1edbi 450 email"}),t.next=10;break;case 5:if(!(0===this.errData.length&&e>0&&n)){t.next=9;break}return t.delegateYield(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0,n=a.dataJson.length,i=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.plus.sleep(5e3);case 2:a.i=e,n=a.dataJson[e],a.plus.sendMail(n).subscribe((function(t){console.log(),t.email&&(a.dataJson.filter((function(e,n){e.email===t.email&&(a.dataJson[n].status=1)})),console.log(e,t.email,n.reciver),localStorage.setItem("moneyMail",JSON.stringify(a.dataJson)))}),(function(t){a.dataJson[e].status=0,localStorage.setItem("moneyMail",JSON.stringify(a.dataJson)),a.plus.alertToasrt({err:" Ch\u01b0a g\u1eedi email \u0111\u1ebfn "+n.reciver})})),e++;case 5:case"end":return t.stop()}}),t)}));case 3:if(!(e<n)){t.next=7;break}return t.delegateYield(i(),"t0",5);case 5:t.next=3;break;case 7:case"end":return t.stop()}}),t)}))(),"t0",7);case 7:t.next=10;break;case 9:this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y thao t\xe1c!"}),window.location.reload();case 10:case"end":return t.stop()}}),t,this)})))}},{key:"pre",value:function(){this.i>0?this.i--:this.i=0}},{key:"next",value:function(){var t=this.dataJson.length;this.i<t?this.i++:this.i=t}},{key:"view",value:function(t){console.log(t),this.mailModal=t,document.getElementById("email").click()}}]),t}(),R.\u0275fac=function(t){return new(t||R)(h.Sb(s.a),h.Sb(a.c))},R.\u0275cmp=h.Mb({type:R,selectors:[["app-mail"]],decls:24,vars:6,consts:[[1,"container"],[1,"text-center","text-primary"],[1,"import"],[1,"modal-body"],[1,"form-group",3,"formGroup"],["for",""],["type","text","required","","placeholder","Nh\u1eadp n\u1ed9i dung ti\xeau \u0111\u1ec1","formControlName","title",1,"form-control"],["placeholder","Nh\u1eadp n\u1ed9i dung th\xf4ng b\xe1o n\u1ebfu c\xf3","formControlName","message","rows","3",1,"form-control"],["target","_blank","href","https://dienluc.tk/assets/file/MauTienLuong.xlsx",1,"badge","badge-warning"],["for","file-upload",1,"custom-file-upload","mx-5"],[1,"fa","fa-cloud-upload"],["hidden","","id","file-upload","type","file","multiple","false",3,"change"],["type","button","class","btn btn-outline-primary mx-3",3,"click",4,"ngIf"],["class","card border-primary",4,"ngIf"],["class","alert-danger",4,"ngIf"],["class","dataOk",4,"ngIf"],["type","button","class","btn btn-primary mx-3","data-toggle","modal","data-target","#modelId",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","mx-3",3,"click"],[1,"card","border-primary"],[1,"button"],["type","button",1,"btn","btn-danger","float-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],["type","button",1,"btn","btn-danger","float-right",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"card-body"],[1,"text-center","rounded","font-weigth-bold","bg-warning","py-2"],[3,"innerHTML"],[1,"alert-danger"],[1,"table","table-hover","table-invert","table-bordered"],[4,"ngFor","ngForOf"],[1,"dataOk"],[1,"table","table-hover"],[1,"text-center"],["scope","row"],[1,"text-center",3,"ngClass"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-primary","mx-3",3,"click"]],template:function(t,e){1&t&&(h.Yb(0,"div",0),h.Yb(1,"h5",1),h.Jc(2,"TH\xd4NG B\xc1O TI\u1ec0N L\u01af\u01a0NG B\u1eb0NG EMAIL"),h.Xb(),h.Yb(3,"div",2),h.Yb(4,"div",3),h.Yb(5,"form",4),h.Yb(6,"label",5),h.Jc(7,"Ti\xeau \u0111\u1ec1"),h.Xb(),h.Tb(8,"input",6),h.Yb(9,"label",5),h.Jc(10,"N\u1ed9i dung th\xf4ng b\xe1o ch\xednh"),h.Xb(),h.Tb(11,"textarea",7),h.Xb(),h.Xb(),h.Yb(12,"a",8),h.Jc(13,"File m\u1eabu"),h.Xb(),h.Yb(14,"label",9),h.Tb(15,"i",10),h.Jc(16," Ch\u1ecdn file "),h.Xb(),h.Yb(17,"input",11),h.fc("change",(function(t){return e.readXlsx(t)})),h.Xb(),h.Hc(18,O,2,0,"button",12),h.Hc(19,B,11,1,"div",13),h.Hc(20,N,5,1,"div",14),h.Hc(21,E,16,1,"div",15),h.Hc(22,F,2,0,"button",16),h.Tb(23,"hr"),h.Xb(),h.Xb()),2&t&&(h.Hb(5),h.pc("formGroup",e.main),h.Hb(13),h.pc("ngIf",e.dataImport.length>0&&0===e.dataJson.length),h.Hb(1),h.pc("ngIf",e.dataJson.length>0&&0==e.errData.length),h.Hb(1),h.pc("ngIf",e.errData.length>0),h.Hb(1),h.pc("ngIf",e.dataJson.length>0&&0===e.errData.length),h.Hb(1),h.pc("ngIf",0===e.errData.length&&e.dataJson.length>0))},directives:[a.u,a.k,a.e,a.b,a.q,a.j,a.d,i.m,i.l,i.k],styles:[""]}),R)}],K=((P=function t(){_classCallCheck(this,t)}).\u0275mod=h.Qb({type:P}),P.\u0275inj=h.Pb({factory:function(t){return new(t||P)},imports:[[d.e.forChild(q)],d.e]}),P),U=((G=function t(){_classCallCheck(this,t)}).\u0275mod=h.Qb({type:G}),G.\u0275inj=h.Pb({factory:function(t){return new(t||G)},imports:[[i.b,K,a.f,a.p,g.b]]}),G)}}]);